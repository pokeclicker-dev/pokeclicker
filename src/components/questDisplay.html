<div id="questDisplayContainer" class="card sortable border-secondary mb-3">

    <div class="card-header p-0" data-toggle="collapse" href="#questDisplayBody">
      <span data-bind='text: !player.tutorialComplete() ? "Quests" : "Quests (" + player.currentQuests().length + "/" + QuestHelper.questSlots()() + ")"'></span>
    </div>
    <button class='btn btn-sm btn-primary' style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;"
            data-bind='visible: player.tutorialComplete(), click: function(){$("#QuestModal").modal("show")}'>
        List
    </button>

    <div id="questDisplayBody" class="card-body p-0 show">
        <!-- ko if: player.currentQuests().length == 0 && player.tutorialComplete()-->
          <span class="pt-2 pb-2">No active quest</span>
        <!-- /ko -->
        <table width="100%">
            <!-- List of player quests -->
            <tbody data-bind="foreach: player.currentQuests">
                <tr class="text-center">
                    <td colspan="2" data-bind="text: QuestHelper.questList()[$data.index].description"></td>
                </tr>
                <tr>
                    <td width="70%" class="p-0">
                        <div class="progress p-0">
                            <div class="progress-bar bg-primary" role="progressbar"
                                data-bind="attr:{ style: 'width:' + (QuestHelper.questList()[$data.index].progress() * 100) + '%'}"
                                aria-valuemin="0" aria-valuemax="100">
                                <span data-bind="text: QuestHelper.questList()[$data.index].progressText">0 / 1000</span>
                            </div>
                        </div>
                    </td>
                    <td width="30%" class="p-0">
                        <button class="btn btn-sm btn-block p-0"
                                data-bind='
                                    click: function(){
                                        QuestHelper.questList()[$data.index].isCompleted() ?
                                        QuestHelper.questList()[$data.index].endQuest() :
                                        QuestHelper.questList()[$data.index].endQuest(true);
                                    },
                                    text: QuestHelper.questList()[$data.index].isCompleted() ? "Claim" : "Quit",
                                    css: {
                                    "btn-success": QuestHelper.questList()[$data.index].isCompleted(),
                                    "btn-danger": !QuestHelper.questList()[$data.index].isCompleted(),
                                    }'>
                        </button>
                    </td>
                </tr>
            </tbody>
            <!-- List of quest line quests -->
            <tbody data-bind="foreach: QuestLineHelper.currentQuests">
                <!-- ko if: $data.totalQuests > 0 && ($data.curQuest() < $data.totalQuests) -->
                <tr>
                    <td class="card-header" colspan="2" data-bind="text: $data.name"></td>
                </tr>
                <tr class="text-center">
                    <td colspan="2" data-bind="text: $data.curQuestObject().description"></td>
                </tr>
                <tr>
                    <td colspan="2" class="p-0">
                        <div class="progress p-0">
                            <div class="progress-bar bg-success" role="progressbar"
                                data-bind="attr:{ style: 'width:' + ($data.curQuestObject().progress() * 100) + '%'}"
                                aria-valuemin="0" aria-valuemax="100">
                                <span data-bind="text: ko.pureComputed(function(){return $data.curQuestObject().progressText()})">0/1000</span>
                            </div>
                        </div>
                    </td>
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
  </div>
</div>
