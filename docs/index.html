<!DOCTYPE html>
<html>
<head>
    <title>Pokéclicker</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset="utf-8"/>
    <link href="assets/images/favicon.ico" rel="icon" type="image/x-icon"/>
    <script type="text/html" id="pokemonListTemplate">
        <tr data-bind='ifnot: $data.breeding'>
            <td class="text-nowrap">
                <img class="smallImage"
                     data-bind="attr:{ src: PokemonHelper.getImage($data, App.game.party.alreadyCaughtPokemon($data.id, true)) }"
                     src=""/>
                <span data-bind="text: name">Name</span><sup data-bind="visible: App.game.party.alreadyCaughtPokemon($data.id, true)">✨</sup>
            </td>
            <td data-bind="text: attack">Atk</td>
            <td data-bind="text: level">Lvl</td>
        </tr>
    </script>

    <!--jQuery-->
    <script src="libs/jquery.min.js"></script>

    <!--Knockout-->
    <script src="libs/knockout-latest.js"></script>

    <!--Sortable-->
    <script src="libs/Sortable.min.js"></script>

    <!--Minified scripts-->
    <script src="scripts/script.min.js?v=0.4.15"></script>

    <!--Popper.js-->
    <script src="libs/popper.min.js"></script>

    <!--Bootstrap-->
    <link href="libs/bootstrap.min.css" rel="stylesheet">
    <script src="libs/bootstrap.min.js"></script>

    <!--Notify-->
    <script src="libs/bootstrap-notify.min.js"></script>

    <!--Motio-->
    <script src="libs/motio.js"></script>

    <!--Minified styles-->
    <link href="styles/styles.min.css?v=0.4.15" rel="stylesheet">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-171657234-1"></script>
    <script>
        if (true) {
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());

            gtag('config', 'UA-171657234-1');
        }
    </script>
    <style>
        .loader {
            position: fixed;
            top: 0;
            height: 100%;
            width: 100%;
            background-color: #79c9fa;
            background-size: cover;
            z-index: 9999;
        }

        .loader-wrapper {
            height: 100%;
            width: 100%;
            position: relative;
        }
    </style>

</head>
<body class="no-select" data-bind="class: 'no-select ' + Settings.getSetting('theme').observableValue()">
<div id="toaster"></div>
<link href="https://bootswatch.com/4/yeti/bootstrap.min.css" rel="stylesheet" data-bind="attr: {href: 'https://bootswatch.com/4/' + Settings.getSetting('theme').observableValue() + '/bootstrap.min.css'}">

<!--$DEV_BANNER-->

<div class="loader" id="loader">
    <br>
    <div class="loader-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 offset-sm-3">
                    <img style="width:100%" src="assets/images/pokeclickerlogo.png">
                </div>
            </div>
        </div>
        <div class="loader-content">
            <img src="assets/images/pokeball/Pokeball.png" class="loader-pokeball"/>
            <div class="progress">
                <div id="preload-progress-bar" class="progress-bar bg-primary" role="progressbar" style="width:0%;">
                    <span id="preload-progress-text">Loading...</span>
                </div>
            </div>
        </div>
    </div>

</div>


<!-- Game menu-->
<div class="dropdown clearfix" style="position:absolute; right:0; top:0; z-index: 100;">
    <button class="btn btn-secondary dropdown-toggle float-right" type="button" data-toggle="dropdown">Start
        Menu
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-right">
        <li>
            <a class="dropdown-item" href="#pokedexModal" data-toggle="modal">Pokédex</a>
        </li>
        <li>
            <a class="dropdown-item" href="#badgeCaseModal" data-toggle="modal">Badge Case</a>
        </li>
        <li>
            <button class="dropdown-item" href="#statisticsModal" data-toggle="modal">Statistics</button>
        </li>
        <li>
            <a class="dropdown-item" href="#achievementsModal" data-toggle="modal">Achievements</a>
        </li>
        <li>
            <a class="dropdown-item" href="#logBookModal" data-toggle="modal">Log Book</a>
        </li>
        <li data-bind="attr: {  title: App.game.shards.canAccess() ? '' : 'Progress further to unlock...'}">
            <a class="dropdown-item" href="#" data-bind="click:function(){App.game.shards.openShardModal()},
            attr: {class: App.game.shards.canAccess() ? 'dropdown-item' : 'dropdown-item disabled all-pointers'}">Shards</a>
        </li>
        <li>
            <a class="dropdown-item" href="#showItemsModal" data-toggle="modal">Items</a>
        </li>
        <li>
            <a class="dropdown-item" href="#settingsModal" data-toggle="modal">Settings</a>
        </li>
        <li>
            <a class="dropdown-item" href="#saveModal" data-toggle="modal">Save</a>
        </li>
        <li>
            <a class="dropdown-item" href="#changelogModal" data-toggle="modal">Changelog</a>
        </li>
        <li>
            <a class="dropdown-item" href="#eventsModal" data-toggle="modal">Events</a>
        </li>
        <li>
            <a class="dropdown-item" href="https://pokeclicker.reddit.com" target="_blank">Subreddit</a>
        </li>
        <li>
            <a class="dropdown-item" href="https://discord.gg/jcRdtxN" target="_blank">Discord</a>
        </li>
        <li>
            <a class="dropdown-item" href="https://github.com/pokeclicker-dev/pokeclicker/issues" target="_blank">Report a bug</a>
        </li>

    </ul>
</div>


<!-- Get Keyitem modal-->
<div class="modal" id="keyItemModal" tabindex="-1" role="dialog"
     aria-labelledby="keyItemModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="text-align: center">
            <div class="modal-header">
                <div style="width: 100%;">
                    <img src="assets/images/oak.png">
                    <h5 class="modal-title" id="keyItemModalLabel">New key item!</h5>
                </div>
            </div>
            <div class="modal-body">
                <h5><b>Congratulations!</b></h5>
                <span>You have gained a</span><br>
                <img
                        class="key-item"
                        data-bind="attr:{ title: App.game.keyItems.itemList[KeyItemController.latestGainedItem].displayName,  src: 'assets/images/keyitems/' + KeyItems.KeyItem[KeyItemController.latestGainedItem] + '.png'}"
                        src=""/><br>
                <span><strong
                        data-bind="text: App.game.keyItems.itemList[KeyItemController.latestGainedItem].displayName">Name</strong></span><br>
                <span data-bind="html:  App.game.keyItems.itemList[KeyItemController.latestGainedItem].description">Description</span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Show keyitems modal-->
<!-- Show Items modal-->
<div class="modal" id="showItemsModal" tabindex="-1" role="dialog"
     aria-labelledby="showItemModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="text-align: center">

            <ul style="width:100%" class="nav nav-tabs nav-fill">
                <li class="nav-item"><a data-toggle='tab' class='nav-link' href="#items">Evolution stones</a>
                </li>
                <li class='nav-item'><a data-toggle='tab' class='nav-link active' href="#keyItems">Key Items</a>
                </li>
            </ul>
            <div class="tab-content">
                <div id="items" class="tab-pane fade">
                    <h3 data-bind="text: GameConstants.humanifyString(ItemHandler.stoneSelected())"></h3>
                    <div class="page-item m-0">
                        <div class="row no-gutters justify-content-sm-center" style="padding:15px;">
                            <div class="row col-lg-6 col-sm-10" data-bind="foreach: Object.keys(GameConstants.StoneType).filter(stone => isNaN(stone) && stone !== 'None')">
                                <div class="col-2" style="cursor: pointer"
                                        data-bind="css:{'item-selected': ItemHandler.stoneSelected() === $data},
                                            click: function(){ ItemHandler.stoneSelected($data); ItemHandler.pokemonSelected('')}">
                                    <img data-bind="attr: {src: 'assets/images/items/' + $data + '.png'}" style="max-width: 32px;">
                                    <div data-bind="text: player._itemList[$data]()"></div>
                                </div>
                            </div>
                        </div>


                        <div class="row no-gutters justify-content-sm-center" style="padding:15px">
                            <div class="row col-lg-10 col-md-12 offset-md-0 col-sm-12 offset-sm-0"
                                 style="padding-right: 0"
                                 data-bind="foreach: PokemonHelper.getPokemonsWithEvolution(GameConstants.StoneType[ItemHandler.stoneSelected()])">
                                <div class="col-md-6 col-sm-10 col-lg-4 offset-sm-1 offset-md-0 offset-md-0 breedingListItem">
                                    <button class="btn btn-secondary smallButton list-group-item-action" style="padding-right:15px"
                                            data-bind="click: function() {ItemHandler.pokemonSelected(name)}, css:{ 'pokemon-selected': ItemHandler.pokemonSelected() === name}">
                                        <img class="smallImage" data-bind="attr:{src: 'assets/images/' + (App.game.party.alreadyCaughtPokemon($data.id, true) ? 'shiny' : '') + 'pokemon/' + id +'.png' }"/>
                                        <span data-bind="text: name" style="margin-left: 20px">Name</span>

                                        <span style="float:right; margin-top:8px" data-bind="template: { name: 'caughtStatusTemplate', data: {'status':
                                            PartyController.getEvolutionsCaughtStatus($data.id, GameConstants.StoneType[ItemHandler.stoneSelected()])
                                            }}"></span>
                                    </button>
                                </div>
                            </div>
                        </div>


                        <div class="btn-group" style="padding:15px;">
                            <button class="btn btn-secondary amount-button list-group-item-action"
                                    data-bind="click: function() {ItemHandler.amountSelected(1)}, css:{ 'pokemon-selected': ItemHandler.amountSelected() === 1}">
                                1
                            </button>
                            <button class="btn btn-secondary amount-button list-group-item-action"
                                    data-bind="click: function() {ItemHandler.amountSelected(10)}, css:{ 'pokemon-selected': ItemHandler.amountSelected() === 10}">
                                10
                            </button>
                            <button class="btn btn-secondary amount-button list-group-item-action"
                                    data-bind="click: function() {ItemHandler.amountSelected(100)}, css:{ 'pokemon-selected': ItemHandler.amountSelected() === 100}">
                                100
                            </button>
                            <button class="btn btn-secondary amount-button list-group-item-action"
                                    data-bind="click: function() {ItemHandler.amountSelected(1000)}, css:{ 'pokemon-selected': ItemHandler.amountSelected() === 1000}">
                                1000
                            </button>
                            <button class="btn btn-secondary amount-button list-group-item-action"
                                    data-bind="click: function() {ItemHandler.amountSelected(Infinity)}, css:{ 'pokemon-selected': ItemHandler.amountSelected() === Infinity}">
                                Maximum
                            </button>
                        </div>
                        <p><i>Stops using evolution stones once a shiny is encountered</i></p>
                        <div class="row no-gutters justify-content-sm-center">
                            <div class="row justify-content-center" style="padding:15px;">
                                <button data-bind="click: function(){ItemHandler.useStones()}" class="btn btn-lg btn-success">Use evolution stones!</button>
                            </div>
                        </div>
                   </div>
                </div>

                <div id="keyItems" class="tab-pane fade in active show">
                    <div class="page-item m-0">
                        <div class="row no-gutters justify-content-sm-center"
                             data-bind="foreach: App.game.keyItems.itemList">
                            <div class="col-2">
                                <img class="clickable key-item" src=""
                                     data-bind="attr:{
                                     src: 'assets/images/keyitems/' + KeyItems.KeyItem[$data.name] + '.png'},
                              css: {'key-item-locked': !App.game.keyItems.hasKeyItem($data.name),
                              'key-item-selected': KeyItemController.inspectedItem == $data.name
                              },
                             event: {
                                mouseover: function(){KeyItemController.hover($data.name)},
                                mouseout : function(){KeyItemController.hoverRelease()}
                                }">
                            </div>
                        </div>

                        <div class="card oak-item-info" style="height:90px">
                            <div class="row justify-content-sm-center">
                                <div style="height: 20px" class="col-xs-10">
                                    <b><span data-bind="text: App.game.keyItems.itemList[KeyItemController.inspectedItem].displayName"></span></b>
                                </div>
                            </div>
                            <div class="row justify-content-sm-center">
                                <div class="col-xs-10">
                                    <div data-bind="if: App.game.keyItems.hasKeyItem(KeyItemController.inspectedItem)">
                                        <p style="margin-top: 5px"
                                           data-bind="html: App.game.keyItems.itemList[KeyItemController.inspectedItem].description"></p>
                                    </div>
                                    <div data-bind="ifnot: App.game.keyItems.hasKeyItem(KeyItemController.inspectedItem)">
                                        <p style="margin-top: 5px">?????</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<!--Templates -->
<script type="text/html" id="currencyTemplate">
    <span style="display: inline;">
        <!-- ko if: $data.currency == GameConstants.Currency.money -->
        <img alt="Money" src="assets/images/currency/money.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.dungeonToken -->
        <img alt="Dungeon Tokens" src="assets/images/currency/dungeonToken.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.questPoint -->
        <img alt="Quest Points" src="assets/images/currency/questPoint.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.diamond -->
        <img alt="Diamonds" src="assets/images/underground/diamond.svg" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.farmPoint -->
        <img alt="Farm Points" src="assets/images/currency/farmPoint.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->

        <span data-bind="text: $data.amount.toLocaleString('en-US')">0</span>
    </span>
</script>

<script type="text/html" id="amountTemplate">
    <span data-bind="template: { name: 'currencyTemplate', data: {'amount': $data.amount, 'currency': $data.currency}}"></span>
</script>

<!-- Example usage -->
<!-- <span data-bind="template: { name: 'currencyTemplate', data: {'amount': FarmController.plotPrice(), 'currency': GameConstants.Currency.farmPoint}}"></span> -->

<script type="text/html" id="caughtStatusTemplate">
    <knockout style="display: inline;">
        <!-- ko if: $data.status == CaughtStatus.Caught -->
        <img title="You have captured this Pokémon!"
             class="pokeball-smallest"
             src="assets/images/pokeball/Pokeball-small.png"
        />
        <!-- /ko -->
        <!-- ko if: $data.status == CaughtStatus.CaughtShiny -->
        <img title="You have captured this Pokémon shiny!"
             class="pokeball-smallest"
             src="assets/images/pokeball/Pokeball-shiny-small.png"
        />
        <!-- /ko -->
    </knockout>
</script>

<!-- Example usage -->
<!-- <span data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(id)}}"></span> -->

<script type="text/html" id="eggSVGTemplate">
  <svg class="egg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 126.7 126.7" data-bind="attr: {'data-type1': PokemonType[$data.pokemonType1], 'data-type2': PokemonType[$data.pokemonType2]}">
    <defs>
      <filter id="b" width="1.193" height="1.123" x="-.096" y="-.061" color-interpolation-filters="sRGB">
        <feGaussianBlur stdDeviation=".402"/>
      </filter>
      <filter id="a" width="1.067" height="1.045" x="-.034" y="-.023" color-interpolation-filters="sRGB">
        <feGaussianBlur stdDeviation="1.168"/>
      </filter>
    </defs>
    <path class="egg-main" d="M111.5 76.2a48.2 47.7 0 11-96.3 0c0-26.3 21.5-74.7 48.1-74.7s48.2 48.4 48.2 74.7z"/>
    <g data-bind="html: BreedingController.getEggSpots($data.pokemon)"></g>
    <path fill-opacity=".1" d="M63.3 1.5s34.377 56.31 22.684 83.558c-11.693 27.25-58.004 25.939-58.004 25.939 37.3 33.053 83.737 5.438 83.52-33.997-.147-26.6-21.6-75.5-48.2-75.5z" filter="url(#a)"/>
    <path fill="#fff" fill-opacity=".3" d="M47.106 33.508a4.8 8 0 01-4.284 7.952 4.8 8 0 01-5.204-6.246 4.8 8 0 013.167-9.293 4.8 8 0 015.884 4.252" filter="url(#b)" transform="rotate(13.2 42.307 33.508)"/>
    <path fill="#111" d="M63.3 126.7A49.7 49.7 0 0113.7 77c0-14 5.6-33 14.3-48.5C38.3 10.1 50.8 0 63.3 0c12.5 0 25 10.1 35.4 28.5A109 109 0 01113 77a49.7 49.7 0 01-49.7 49.7zM63.3 3C48 3 36.3 20 30.6 30a105 105 0 00-14 47 46.7 46.7 0 0093.4 0c0-13.5-5.5-32-14-47C90.5 20 78.8 3 63.4 3z"/>
  </svg>
</script>


<div class="container">
    <div class="row justify-content-center">
        <!--The id title is needed for a default marker for money animation to display when not in a wild battle where the playerMoney span is not visible-->
        <h1 id="gameTitle">Pokéclicker</h1>
    </div>
    <div class="row justify-content-lg-center" style="text-align: center">

        <!--The next two divs switch around on large screens. This way, battle screen/map is on top on smaller screens-->
        <!--left column-->
        <div id="left-column" class="col-lg-3 col-md-6 order-lg-first">

            <!-- pokeball selector -->
            <div id="pokeballSelector" class="card sortable border-secondary mb-3" data-bind="visible: player.starter != GameConstants.Starter.None">
    <div class="card-header p-0" data-toggle="collapse" href="#pokeballSelectorBody">
        <span>Pokéballs</span>
    </div>
    <button type="button" class="btn btn-info"
            style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px; padding: 4px;"
            data-bind="tooltip: { title: 'Select which Pokéball to use on Pokémon depending on their status', trigger: 'hover', placement:'left' }">
        ?
    </button>
    <div id="pokeballSelectorBody" class="card-body p-0 show table-responsive">
        <table class="table table-sm m-0">
            <thead>
            <tr>
                <th width="20%" title="Previously captured Pokémon will use this ball selection">Caught</th>
                <th width="20%" title="Previously captured Shiny Pokémon will use this ball selection">✨</th>
                <th width="20%" title="Amount of balls you have available">#</th>
                <th width="20%" title="Uncaptured Pokémon will use this ball selection">New</th>
                <th width="20%" title="Uncaptured Shiny Pokémon will use this ball selection">✨</th>
            </tr>
            </thead>
            <tbody>
              <tr data-bind="template: { name: 'pokeballSelectionTemplate', data: {'image': 'None', 'amount': '', 'ball': GameConstants.Pokeball.None}}"></tr>
              <tr data-bind="template: { name: 'pokeballSelectionTemplate', data: {'image': 'Pokeball-small', 'amount': App.game.pokeballs.pokeballs[0], 'ball': GameConstants.Pokeball.Pokeball}}"></tr>
              <tr data-bind="template: { name: 'pokeballSelectionTemplate', data: {'image': 'Greatball-small', 'amount': App.game.pokeballs.pokeballs[1], 'ball': GameConstants.Pokeball.Greatball}}"></tr>
              <tr data-bind="template: { name: 'pokeballSelectionTemplate', data: {'image': 'Ultraball-small', 'amount': App.game.pokeballs.pokeballs[2], 'ball': GameConstants.Pokeball.Ultraball}}"></tr>
              <tr data-bind="template: { name: 'pokeballSelectionTemplate', data: {'image': 'Masterball-small', 'amount': App.game.pokeballs.pokeballs[3], 'ball': GameConstants.Pokeball.Masterball}}"></tr>
            </tbody>
        </table>
    </div>

    <script type="text/html" id="pokeballSelectionTemplate">
        <td>
            <img class="pokeball-small clickable"
                data-bind="attr: {src: 'assets/images/pokeball/' + $data.image + '.png'},
                    click: function(){App.game.pokeballs.alreadyCaughtSelection = $data.ball}, css: {'pokeball-selected': App.game.pokeballs.alreadyCaughtSelection === $data.ball}"/>
        </td>
        <td>
            <img class="pokeball-small clickable"
                data-bind="attr: {src: 'assets/images/pokeball/' + $data.image + '.png'},
                    click: function(){App.game.pokeballs.alreadyCaughtShinySelection = $data.ball}, css: {'pokeball-selected': App.game.pokeballs.alreadyCaughtShinySelection === $data.ball}"/>
        </td>
        <td>
            <span data-bind="text: GameConstants.formatNumber($data.amount), tooltip: {title: $data.amount.toLocaleString('en-US'), trigger: 'hover', animation: false}"></span>
        </td>
        <td>
            <img class="pokeball-small clickable"
                data-bind="attr: {src: 'assets/images/pokeball/' + $data.image + '.png'},
                    click: function(){App.game.pokeballs.notCaughtSelection = $data.ball}, css: {'pokeball-selected': App.game.pokeballs.notCaughtSelection === $data.ball}"/>
        </td>
        <td>
            <img class="pokeball-small clickable"
                data-bind="attr: {src: 'assets/images/pokeball/' + $data.image + '.png'},
                    click: function(){App.game.pokeballs.notCaughtShinySelection = $data.ball}, css: {'pokeball-selected': App.game.pokeballs.notCaughtShinySelection === $data.ball}"/>
        </td>
    </script>
</div>


            <!-- Battle Item container-->
            <div id="battleItemContainer" class="card sortable border-secondary mb-3">
    <div class="card-header p-0" data-toggle="collapse" href="#battleItemContainerBody">
      <span>Battle Items</span>
    </div>
    <div id="battleItemContainerBody" class="card-body p-0 show">
      <table class="table table-bordered m-0">
        <tbody>
          <tr data-bind="foreach: Object.keys(ItemList).filter(i=>ItemList[i].constructor.name == 'BattleItem')">
            <td class="amount p-0" data-bind="text: GameHelper.formatAmount(player.itemList[$data]())"></td>
          </tr>
          <tr data-bind="foreach: Object.keys(ItemList).filter(i=>ItemList[i].constructor.name == 'BattleItem')">
            <td class="p-0" data-bind="attr: {
                                disabled: !player.itemList[$data]()
                            },
                            css: {
                                'bg-primary': EffectEngineRunner.getEffect($data) > 5,
                                'bg-warning': EffectEngineRunner.getEffect($data) <= 5 && EffectEngineRunner.getEffect($data) > 0,
                                'bg-secondary': !EffectEngineRunner.isActive($data)()
                            },
                            event: {
                                click: function(){ItemHandler.useItem($data)}
                            },
                            tooltip: {
                              title: $data.replace('_', ' ') + '<br/>' + ItemList[$data].description,
                              trigger: 'hover',
                              placement:'bottom',
                              html: true
                            }">
                <img src="" class="clickable" data-bind="attr: { src: 'assets/images/items/' + $data + '.png' }" width="26px">

            </td>
          </tr>
          <tr data-bind="foreach: Object.keys(ItemList).filter(i=>ItemList[i].constructor.name == 'BattleItem')">
            <td class="text-light p-0">
              <!-- ko if: EffectEngineRunner.getEffect($data) > 0 -->
                <code data-bind="text: player.effectTimer[$data]()"></code>
              <!-- /ko -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>

</div>


            <!-- Pokemon List container-->
            <div id="pokemonListContainer" class="card sortable border-secondary mb-3" data-bind="visible: player.starter != GameConstants.Starter.None">
    <div class="card-header p-0" data-toggle="collapse" href="#pokemonListBody">
        <span>Pokémon List</span>
    </div>
    <div id="pokemonListBody" class="card-body p-0 show table-responsive">
        <div data-bind="template: { name: 'PartySortSettingTemplate', data: Settings.getSetting('partySort')}"></div>

        <table id="pokemonList" class="table table-striped table-hover table-sm m-0">
            <thead>

            <tr>
                <th>Name</th>
                <th>Atk</th>
                <th>Lvl</th>
            </tr>
            </thead>
            <tbody data-bind="template: { name: 'pokemonListTemplate', foreach: PartyController.getSortedList()() }">

            </tbody>
        </table>
    </div>

    <script type="text/html" id="PartySortSettingTemplate">
        <div class="row no-gutters" style="align-items: center">
            <div class="col-2">Sort:</div>
            <select class="col-9" onchange="Settings.setSettingByName(this.name, SortOptions[SortOptions[this.value]])"
                    data-bind="foreach: $data.options, attr: {name}">
                <option data-bind="text: $data.text, value: $data.value, attr:{ selected: $parent.observableValue() == $data.value}"></option>
            </select>
            <div class="col-1">
                <label for="partySortDirection" class="clickable" style="font-size: 24px;" data-bind="text: Settings.getSetting('partySortDirection').observableValue() ? '⥄' : '⥂'">⥂</label>
                <input id="partySortDirection" style="vertical-align: middle" class="hidden" type='checkbox'
                       data-bind="checked: Settings.getSetting('partySortDirection').observableValue()"
                       onchange="Settings.setSettingByName('partySortDirection', this.checked)"/>
            </div>
        </div>
    </script>
</div>


        </div>

        <!--Middle column-->
        <div id="middle-column" class="col-lg-6 col-md-12 order-md-first">
            <div id="battleContainer" class="card sortable-disabled border-secondary mb-3">

                <div class="card-header p-0" data-bind="visible: (App.game.gameState === GameConstants.GameState.fighting ||
                                     App.game.gameState === GameConstants.GameState.dungeon ||
                                     App.game.gameState === GameConstants.GameState.paused ||
                                     App.game.gameState === GameConstants.GameState.town ||
                                     App.game.gameState === GameConstants.GameState.shop ||
                                     App.game.gameState === GameConstants.GameState.gym)">
                    <table width="100%">
                        <tr>
                            <td width="33.33%">
                                <span style="display: inline;">
                                    <img title="Money" src="assets/images/currency/money.png" height="25px">
                                    <span id="playerMoney" data-bind="text: App.game.wallet.currencies[GameConstants.Currency.money].toLocaleString('en-US')">0</span>
                                </span>
                            </td>
                            <td width="33.33%">
                                <span style="display: inline;">
                                    <img title="Dungeon Tokens&#013;&#010;Gained by capturing Pokémon" src="assets/images/currency/dungeonToken.png" height="25px">
                                    <span id="playerMoneyDungeon" data-bind="text: App.game.wallet.currencies[GameConstants.Currency.dungeonToken].toLocaleString('en-US')">0</span>
                                </span>
                            </td>
                            <td width="33.33%">
                                <span style="display: inline;">
                                    <img title="Quest points" src="assets/images/currency/questPoint.png" height="25px">
                                    <span id="playerMoneyQuest" data-bind="text: App.game.wallet.currencies[GameConstants.Currency.questPoint].toLocaleString('en-US')">0</span>
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>

                <!--RouteBattleView-->
                <!--Use the base battle layout for fighting and dungeons.-->

                <div class="battle-view card-body p-0 justify-content-center no-gutters no-select"
                    data-bind="if: (App.game.gameState === GameConstants.GameState.fighting || App.game.gameState === GameConstants.GameState.dungeon || App.game.gameState === GameConstants.GameState.paused || App.game.gameState === GameConstants.GameState.town || App.game.gameState === GameConstants.GameState.gym),
                        class: MapHelper.calculateBattleCssClass()">
                    
                    <!-- Route Battles -->
                    <div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState === GameConstants.GameState.fighting">
                        <div class="col no-gutters clickable" data-bind="click: function() {Battle.clickAttack()}" style="height: 220px; display: block;">
                            <h2 class="pageItemTitle" style="display: block;">

                                <!-- ko if: App.game.statistics.routeKills[player.route()]() < GameConstants.ROUTE_KILLS_NEEDED -->
                                <knockout class="right" data-bind="text: App.game.statistics.routeKills[player.route()]() + ' / ' + GameConstants.ROUTE_KILLS_NEEDED">0/10</knockout>
                                <!-- /ko -->

                                <knockout class="left">
                                    Route <knockout data-bind="text: player.route">number</knockout>
                                    <!--If all Pokémon on the route are caught-->
                                    <knockout data-bind="if: (!RouteHelper.routeCompleted(player.route(), player.region, true) && RouteHelper.routeCompleted(player.route(), player.region, false))">
                                        <img title="You have captured all Pokémon on this route!" class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-small.png"/>
                                    </knockout>

                                    <!--If all Pokémon on the route are caught shiny-->
                                    <knockout data-bind="if: RouteHelper.routeCompleted(player.route(), player.region, true)">
                                        <img title="You have captured all Pokémon shiny on this route!" class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-shiny-small.png"/>
                                    </knockout>
                                </knockout>

                                <knockout>
                                    <knockout data-bind="text: Battle.enemyPokemon().name">Pokemon name</knockout>
                                    <knockout data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(Battle.enemyPokemon().id)}}"></knockout>
                                </knockout>

                            </h2>

                            <div>
                                <div data-bind="ifnot: Battle.catching">
                                    <img class="enemy"
                                         data-bind="attr:{ src: PokemonHelper.getImage(Battle.enemyPokemon(), Battle.enemyPokemon().shiny) }"
                                         src=""/>
                                </div>
                                <div data-bind="if: Battle.catching" class="catchChance">
                                    <img class="pokeball-animated"
                                         data-bind="attr:{ src: 'assets/images/pokeball/' + GameConstants.Pokeball[Battle.pokeball()] + '.png' }"
                                         src=""/>
                                    <br>
                                    Catch Chance:
                                    <knockout data-bind="text: Battle.catchRateActual() + '%'">Catch Rate</knockout>
                                </div>
                            </div>
                            <div class="progress hitpoints" style="height: 20px;">
                                <div class="progress-bar bg-danger" role="progressbar"
                                     data-bind="attr:{ style: 'width:' + Battle.enemyPokemon().healthPercentage() + '%' }"
                                     aria-valuemin="0" aria-valuemax="100">
                                     <span data-bind="text: Battle.enemyPokemon().health() + ' / ' + Battle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dungeon Battles -->
                    <div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState === GameConstants.GameState.dungeon">
                        <div class="col no-gutters clickable" style="height: 220px; display: block;"
                            data-bind="click: function() {
                              if (DungeonRunner.fighting() && !DungeonBattle.catching()) {
                                DungeonBattle.clickAttack();
                              } else if (DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.chest) {
                                DungeonRunner.openChest();
                              } else if (DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.boss && !DungeonRunner.fightingBoss()) {
                                DungeonRunner.startBossFight();
                              }
                            }">
                            <h2 class="pageItemTitle" style="display: block;">
                                <knockout data-bind="if: DungeonBattle.enemyPokemon() && DungeonBattle.enemyPokemon().health()">
                                    <knockout data-bind="text: DungeonBattle.enemyPokemon().name">Pokemon name</knockout>
                                    <knockout data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(DungeonBattle.enemyPokemon().id)}}"></knockout>
                                </knockout>
                                <knockout data-bind="if: !DungeonBattle.enemyPokemon() || !DungeonBattle.enemyPokemon().health()">
                                    &nbsp;
                                </knockout>

                                <knockout class="left">
                                    <knockout data-bind="text: DungeonRunner.dungeon.name()">Dungeon name</knockout>

                                    <!--If all Pokémon in the dungeon are caught-->
                                    <knockout data-bind="if: (!DungeonRunner.dungeonCompleted(DungeonRunner.dungeon, true) && DungeonRunner.dungeonCompleted(DungeonRunner.dungeon, false))">
                                        <img title="You have captured all Pokémon on this route!" class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-small.png"/>
                                    </knockout>

                                    <!--If all Pokémon in the dungeon are caught shiny-->
                                    <knockout data-bind="if: DungeonRunner.dungeonCompleted(DungeonRunner.dungeon, true)">
                                        <img title="You have captured all Pokémon shiny on this route!"
                                             class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-shiny-small.png"/>
                                    </knockout>
                                </knockout>

                                <knockout class="right" data-bind="css: { 'text-danger': DungeonRunner.timeLeftSeconds() < 20, 'text-primary': DungeonRunner.timeLeftSeconds() >= 20 }">
                                    <h4><strong data-bind="text: DungeonRunner.timeLeftSeconds() + 's'"></strong></h4>
                                </knockout>

                                <div class="progress timer">
                                    <div class="progress-bar bg-danger" role="progressbar"
                                         data-bind="attr:{ style: 'width:' + DungeonRunner.timeLeftPercentage() + '%' },
                                         css: { 'bg-danger': DungeonRunner.timeLeftSeconds() < 20, 'bg-primary': DungeonRunner.timeLeftSeconds() >= 20 }"
                                         aria-valuemin="0" aria-valuemax="100">
                                         <span data-bind="text: DungeonRunner.timeLeftSeconds() + 's'" style="font-size: 12px;"></span>
                                    </div>
                                </div>
                            </h2>

                            <!-- ko if: (DungeonRunner.fighting() || DungeonBattle.catching)  -->
                            <div data-bind="if: DungeonBattle.enemyPokemon">
                                <div>
                                    <div data-bind="ifnot: DungeonBattle.catching">
                                        <img class="enemy"
                                             data-bind="attr:{ src: PokemonHelper.getImage(DungeonBattle.enemyPokemon(), DungeonBattle.enemyPokemon().shiny) }"
                                             src=""/>
                                    </div>
                                    <div data-bind="if: DungeonBattle.catching" class="catchChance">
                                        <img class="pokeball-animated"
                                             data-bind="attr:{ src: 'assets/images/pokeball/' + GameConstants.Pokeball[DungeonBattle.pokeball()] + '.png' }"
                                             src=""/>
                                        <br>
                                        Catch Chance:
                                        <knockout data-bind="text: DungeonBattle.catchRateActual() + '%'">Catch Rate</knockout>
                                    </div>
                                </div>
                                <div class="progress hitpoints" style="height: 20px;">
                                    <div class="progress-bar bg-danger" role="progressbar"
                                         data-bind="attr:{ style: 'width:' + DungeonBattle.enemyPokemon().healthPercentage() + '%'}, css: { 'healthbar-boss': DungeonRunner.fightingBoss(), 'bg-danger': !DungeonRunner.fightingBoss()}"
                                         aria-valuemin="0" aria-valuemax="100">
                                         <span data-bind="text: DungeonBattle.enemyPokemon().health() + ' / ' + DungeonBattle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
                                    </div>
                                </div>
                            </div>
                            <!-- /ko -->
                            <!-- ko if: DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.chest -->
                            <div>
                                <img class="dungeon-chest" src="assets/images/dungeons/chest.png"/>
                            </div>
                            <!-- /ko -->
                            <!-- ko if: (DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.boss && !DungeonRunner.fightingBoss()) -->
                            <div>
                                <button class="btn btn-danger dungeon-boss-button">Start Bossfight</button>
                            </div>
                            <!-- /ko -->
                        </div>
                    </div>
                    
                    <!-- Gym Battles -->
                    
<div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState === GameConstants.GameState.gym">
    <div class="col no-gutters clickable" data-bind="click: function() {GymBattle.clickAttack()}" style="height: 220px; display: block;">
        <h2 class="pageItemTitle" style="display: block;">

            <knockout class="left">
                <knockout data-bind="text: GymBattle.gym.leaderName.replace(/\d/g,'')"></knockout>
            </knockout>

            <knockout>
                <knockout data-bind="text: GymBattle.enemyPokemon().name">Pokemon name</knockout>
            </knockout>
            
            <knockout class="right">
                <span data-bind="foreach: new Array(GymBattle.pokemonsDefeatedComputable())">
                    <img src="assets/images/pokeball/Pokeball-small.png" class="pokeball-smallest pokeball-defeated"/>
                </span>
                <span data-bind="foreach: new Array(GymBattle.pokemonsUndefeatedComputable())">
                    <img src="assets/images/pokeball/Pokeball-small.png" class="pokeball-smallest"/>
                </span>
            </knockout>

            <div class="progress timer">
                <div class="progress-bar bg-danger" role="progressbar"
                     data-bind="attr:{ style: 'width:' + GymRunner.timeLeftPercentage() + '%' },
                     css: { 'bg-danger': GymRunner.timeLeftSeconds() < 10, 'bg-primary': GymRunner.timeLeftSeconds() >= 10 }"
                     aria-valuemin="0" aria-valuemax="100">
                     <span data-bind="text: GymRunner.timeLeftSeconds() + 's'" style="font-size: 12px;"></span>
                </div>
            </div>
        </h2>

        <div id="gymCountdown">
          <div class="row" style="display: inline-block; vertical-align: middle;">
            <div class="col-sm-6 offset-sm-3">
              <img style="width:100%" id="gymGo" src="assets/gifs/go.gif">
            </div>
          </div>
        </div>

        <div>
            <img class="enemy" data-bind="attr:{ src: PokemonHelper.getImage(GymBattle.enemyPokemon(), GymBattle.enemyPokemon().shiny) }" src=""/>
            <!-- TODO: put this image somewhere
            <img height="56px" id="gymLeader" src="" data-bind="attr:{ src: 'assets/images/gymLeaders/' + GymBattle.gym.leaderName + '.png'}">
            -->
        </div>

        <div class="progress hitpoints" style="height: 20px;">
            <div class="progress-bar bg-danger" role="progressbar"
                    data-bind="attr:{ style: 'width:' + GymBattle.enemyPokemon().healthPercentage() + '%' }"
                    aria-valuemin="0" aria-valuemax="100">
                <span data-bind="text: GymBattle.enemyPokemon().health() + ' / ' + GymBattle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
            </div>
        </div>
    </div>
</div>


                    <!--TownView-->
                    <knockout data-bind="if: App.game.gameState === GameConstants.GameState.town">
<div id="townView" data-bind="style: { backgroundImage: 'url(\'assets/images/towns/' + player.town().name() + '.png\')' }"
     class="justify-content-center no-gutters no-select">
    <div class="row justify-content-center no-gutters">
        <div class="col no-gutters">
            <button type="button" class="btn btn-outline-info" style="float: right;"
            data-bind="visible: player.town().gym() || player.town().shop(), tooltip: { title: 'In towns you can battle gymleaders to earn badges, or visit shops to buy items.', trigger: 'hover', placement:'left' }">?</button>
            <button type="button" class="btn btn-outline-info" style="float: right;"
            data-bind="visible: player.town() instanceof DungeonTown, tooltip: { title: 'Capture Pokémon to gain Dungeon Tokens in order to battle dungeons.', trigger: 'hover', placement:'left' }">?</button>
            <h2 class="pageItemTitle">
              <knockout data-bind="text: player.town().name()">Town Name</knockout>

              <knockout data-bind="if: player.town() instanceof DungeonTown && player.town().dungeon()">
                  <!--If all Pokémon in the dungeon are caught-->
                  <knockout data-bind="if: (!DungeonRunner.dungeonCompleted(player.town().dungeon(), true) && DungeonRunner.dungeonCompleted(player.town().dungeon(), false))">
                      <img title="You have captured all Pokémon on this route!" class="pokeball-smallest"
                           src="assets/images/pokeball/Pokeball-small.png"/>
                  </knockout>

                  <!--If all Pokémon in the dungeon are caught shiny-->
                  <knockout data-bind="if: DungeonRunner.dungeonCompleted(player.town().dungeon(), true)">
                      <img title="You have captured all Pokémon shiny on this route!"
                           class="pokeball-smallest"
                           src="assets/images/pokeball/Pokeball-shiny-small.png"/>
                  </knockout>
              </knockout>
            </h2>
        </div>
    </div>
    <div class="row no-gutters">
       <div class="col-3 no-gutters">
           <div class="list-group" data-bind="if: player.town() instanceof PokemonLeague">
              <!-- ko foreach: player.town().gymList -->
                   <button
                           data-bind="text: $data.leaderName.replace(/\d/g,''),
                                      disable: !Gym.isUnlocked($data),
                                      click: function() {GymRunner.startGym($data)},
                                      attr: { class: Gym.calculateCssClass($data)}">
                       E4 Leader
                   </button>
               <!-- /ko -->
           </div>
           <div class="list-group">
               <button data-bind="visible: player.town().gym, attr: { class: player.town().gym() ? Gym.calculateCssClass(player.town().gym()) : '' }"
                       onclick="GymRunner.startGym(player.town().gym())">
                   Gym
               </button>
               <a class="btn btn-secondary" href="#shopModal" data-bind="visible: player.town().shop" data-toggle="modal" onclick="ShopHandler.showShop(player.town().shop())">Shop</a>
               <button class="btn btn-warning"
                       href="#nextRegionModal" data-toggle="modal"
                       data-bind="visible: MapHelper.ableToTravel() && GameConstants.StartingTowns.includes(player.town().name()), text: `Travel to ${GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])}`">
                     Travel To Next Region
               </button>
               <button class="btn btn-info" onclick="MapHelper.openShipModal();" data-bind="visible: player.highestRegion() > 0 && GameConstants.DockTowns.includes(player.town().name())">
                     Dock
               </button>
               <button class="btn btn-secondary p-0"
                       onclick="DungeonRunner.initializeDungeon(player.town().dungeon())"
                       data-bind="visible: player.town() instanceof DungeonTown, if: player.town().dungeon(), attr: { class: player.town().dungeon() && App.game.wallet.currencies[GameConstants.Currency.dungeonToken] >= player.town().dungeon().tokenCost ? 'btn btn-success p-0' : 'btn btn-secondary p-0' }">
                   Start<br/>
                   <span data-bind="template: { name: 'currencyTemplate', data: {'amount': player.town().dungeon().tokenCost, 'currency': GameConstants.Currency.dungeonToken}}"></span>
               </button>
               <button class="btn btn-secondary"
                       onclick="MapHelper.moveToTown(player.town().dungeon().name())"
                       data-bind="visible: player.town().dungeon() && (!(player.town() instanceof DungeonTown) && player.town() instanceof Town), if: player.town().dungeon()">
                   <span data-bind="text: player.town().dungeon().name()"></span>
               </button>
           </div>
       </div>

    </div>
    <knockout data-bind="if: (player.town().dungeon() && player.town() instanceof DungeonTown)">
      <div id="dungeonPokemonList" class="card">
        <!--Display all available Pokémon in this dungeon-->
        <ul class="list-inline"
          data-bind="foreach: player.town().dungeon().allPokemonNames">
          <li class="list-inline-item">
            <img class="dungeon-pokemon-preview" src=""
                data-bind="attr:{ src: 'assets/images/' + (App.game.party.alreadyCaughtPokemonByName($data, true) ? 'shiny' : '') + 'pokemon/' + pokemonMap[$data].id + '.png' }, css: { 'dungeon-pokemon-locked': !App.game.party.alreadyCaughtPokemonByName($data) }"/>
            <sup style="float:right; top:10px;" data-bind="visible: App.game.party.alreadyCaughtPokemonByName($data, true)">✨</sup>
          </li>
        </ul>
      </div>
    </knockout>
</div>
</knockout>

                </div>


                <div class="card-footer p-0" data-bind="hidden: App.game.gameState === GameConstants.GameState.town">
                    <table width="100%">
                        <tr>
                            <td width="50%">
                              <span style="display: inline;">Pokémon Attack:
                                  <span data-bind="text: App.game.party.pokemonAttackObservable()().toLocaleString('en-US')"></span>
                              </span>
                            </td>
                            <td width="50%">
                              <span style="display: inline;">Click Attack:
                                  <span data-bind="text: App.game.party.calculateClickAttack().toLocaleString('en-US')"></span>
                              </span>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- ko if: App.game.gameState === GameConstants.GameState.dungeon -->
            <div id="dungeonMap" class="card sortable-disabled border-secondary mb-3 dungeon no-select">
                <div class="card-header p-0">
                    <span data-bind="text: DungeonRunner.dungeon.name()"></span>
                </div>
                <div class="card-body p-0 text-center">
                    <table class="dungeon-board">
                      <tbody data-bind="foreach: DungeonRunner.map.board()">
                        <tr data-bind="foreach: $data">
                            <td data-bind=" click: function(){DungeonRunner.map.moveToCoordinates($context.$index(), $parentContext.$index()) }, attr: { class: $data.cssClass}"></td>
                        </tr>
                      </tbody>
                    </table>
                </div>
            </div>
            <!-- /ko -->
            <div id="middle-sort-column">
                <div id="townMap" class="card sortable border-secondary mb-3" data-bind="visible: App.game.keyItems.hasKeyItem(KeyItems.KeyItem.Town_map) && (App.game.gameState === GameConstants.GameState.fighting || App.game.gameState === GameConstants.GameState.gym || App.game.gameState === GameConstants.GameState.town||
                    App.game.gameState === GameConstants.GameState.shop || App.game.gameState === GameConstants.GameState.farm || App.game.gameState === GameConstants.GameState.paused)">
                    <div class="card-header p-0" data-toggle="collapse" href="#mapBody">
                        <span data-bind="text: `Town Map (${GameConstants.camelCaseToString(GameConstants.Region[player.region])})`">Town Map</span>
                    </div>
                    <div id="mapBody" class="card-body p-0 show">
                        <p id="mapTooltip" class="btn btn-secondary" style="visibility: hidden;"></p>
                        <svg id="map" viewBox="0 0 650 400" preserveAspectRatio="xMaxYMax meet">
                            <defs>
                                <lineargradient id="mx-gradient-f8cecc-1-ea583b-1-s-0" x1="0%" x2="0%" y1="0%"
                                                y2="100%">
                                    <stop offset="0%" style="stop-color:#909090"></stop>
                                    <stop offset="100%" style="stop-color:#c1c1c1"></stop>
                                </lineargradient>
                                <lineargradient id="mx-gradient-dae8fc-1-7ea6e0-1-s-0" x1="0%" x2="0%" y1="0%"
                                                y2="100%">
                                    <stop offset="0%" style="stop-color:#DAE8FC"></stop>
                                    <stop offset="100%" style="stop-color:#7EA6E0"></stop>
                                </lineargradient>
                            </defs>

                            <g data-bind='if: player.region == GameConstants.Region.kanto'>
    <image width="100%" xlink:href="assets/images/kanto.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 1-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(1, 0); } ">
    <rect data-route='1'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(1, 0) }"
        height="28"
        width="71"
        x="226" y="-97">
    </rect>

    <text font-size="13px" x="259" y="-79">1</text>

</g>


    <!--Route 2-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(2, 0); } ">
    <rect data-route='2'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(2, 0) }"
        height="28"
        width="79"
        x="127" y="-97">
    </rect>

    <text font-size="13px" x="184" y="-79">2</text>

</g>


    <!--Route 3-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(3, 0); } ">
    <rect data-route='3'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(3, 0) }"
        height="28"
        width="112"
        x="92" y="100">
    </rect>

    <text font-size="13px" x="140" y="120">3</text>

</g>


    <!--Route 4-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(4, 0); } ">
    <rect data-route='4'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(4, 0) }"
        height="28"
        width="170"
        x="174" y="72">
    </rect>

    <text font-size="13px" x="254" y="93">4</text>

</g>


    <!--Route 5-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(5, 0); } ">
    <rect data-route='5'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(5, 0) }"
        height="28"
        width="53"
        x="99" y="-365">
    </rect>

    <text font-size="13px" x="131" y="-347">5</text>

</g>


    <!--Route 6-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(6, 0); } ">
    <rect data-route='6'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(6, 0) }"
        height="28"
        width="54"
        x="180" y="-365">
    </rect>

    <text font-size="13px" x="205" y="-346">6</text>

</g>


    <!--Route 7-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(7, 0); } ">
    <rect data-route='7'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(7, 0) }"
        height="28"
        width="112"
        x="354" y="152">
    </rect>

    <text font-size="13px" x="395" y="173">7</text>

</g>


    <!--Route 8-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(8, 0); } ">
    <rect data-route='8'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(8, 0) }"
        height="28"
        width="90"
        x="270" y="152">
    </rect>

    <text font-size="13px" x="304" y="172">8</text>

</g>


    <!--Route 9-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(9, 0); } ">
    <rect data-route='9'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(9, 0) }"
        height="28"
        width="112"
        x="345" y="73">
    </rect>

    <text font-size="13px" x="395" y="93">9</text>

</g>


    <!--Route 10-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(10, 0); } ">
    <rect data-route='10'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(10, 0) }"
        height="28"
        width="82"
        x="72" y="-472">
    </rect>

    <text font-size="13px" x="125" y="-454">10</text>

</g>


    <!--Route 11-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(11, 0); } ">
    <rect data-route='11'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(11, 0) }"
        height="28"
        width="99"
        x="354" y="232">
    </rect>

    <text font-size="13px" x="395" y="253">11</text>

</g>


    <!--Route 12-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(12, 0); } ">
    <rect data-route='12'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(12, 0) }"
        height="28"
        width="54"
        x="180" y="-472">
    </rect>

    <text font-size="13px" x="198" y="-454">12</text>

</g>


    <!--Route 13-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(13, 0); } ">
    <rect data-route='13'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(13, 0) }"
        height="28"
        width="82"
        x="232" y="-472">
    </rect>

    <text font-size="13px" x="266" y="-454">13</text>

</g>


    <!--Route 14-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(14, 0); } ">
    <rect data-route='14'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(14, 0) }"
        height="28"
        width="81"
        x="363" y="286">
    </rect>

    <text font-size="13px" x="393" y="306">14</text>

</g>


    <!--Route 15-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(15, 0); } ">
    <rect data-route='15'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(15, 0) }"
        height="28"
        width="101"
        x="290" y="314">
    </rect>

    <text font-size="13px" x="338" y="333">15</text>

</g>


    <!--Route 16-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(16, 0); } ">
    <rect data-route='16'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(16, 0) }"
        height="28"
        width="130"
        x="148" y="152">
    </rect>

    <text font-size="13px" x="200" y="172">16</text>

</g>


    <!--Route 17-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(17, 0); } ">
    <rect data-route='17'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(17, 0) }"
        height="28"
        width="134"
        x="180" y="-176">
    </rect>

    <text font-size="13px" x="241" y="-158">17</text>

</g>


    <!--Route 18-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(18, 0); } ">
    <rect data-route='18'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(18, 0) }"
        height="28"
        width="145"
        x="148" y="314">
    </rect>

    <text font-size="13px" x="190" y="333">18</text>

</g>


    <!--Route 19-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(19, 0); } ">
    <rect data-route='19'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(19, 0) }"
        height="54"
        width="28"
        x="283" y="341">
    </rect>

</g>

    <!--Extra bit of Route 19 because it goes around a corner-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(19, 0); } ">
    <rect data-route='19'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(19, 0) }"
        height="28"
        width="95"
        x="188" y="367">
    </rect>

    <text font-size="13px" x="235" y="387">19</text>

</g>


    <!--Route 20-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(20, 0); } ">
    <rect data-route='20'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(20, 0) }"
        height="28"
        width="99"
        x="90" y="367">
    </rect>

    <text font-size="13px" x="129" y="387">20</text>

</g>


    <!--Route 21-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(21, 0); } ">
    <rect data-route='21'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(21, 0) }"
        height="28"
        width="59"
        x="309" y="-96">
    </rect>

    <text font-size="13px" x="336" y="-78">21</text>

</g>


    <!--Route 22-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(22, 0); } ">
    <rect data-route='22'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(22, 0) }"
        height="28"
        width="75"
        x="15" y="205">
    </rect>

    <text font-size="13px" x="39" y="225">22</text>

</g>


    <!--Route 23-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(23, 0); } ">
    <rect data-route='23'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(23, 0) }"
        height="28"
        width="112"
        x="93" y="-43">
    </rect>

    <text font-size="13px" x="147" y="-25">23</text>

</g>


    <!--Route 24-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(24, 0); } ">
    <rect data-route='24'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(24, 0) }"
        height="28"
        width="28"
        x="337" y="45">
    </rect>

    <text font-size="13px" x="343" y="65">24</text>

</g>


    <!--Route 25-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(25, 0); } ">
    <rect data-route='25'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(25, 0) }"
        height="28"
        width="83"
        x="337" y="18">
    </rect>

    <text font-size="13px" x="369" y="38">25</text>

</g>





    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--Pallet Town-->
    

<path d="M 69 298 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Pallet Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Pallet Town')},
        attr: { class: MapHelper.calculateTownCssClass('Pallet Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        "

        d="M 71.8 299.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

     <!--Viridian City-->
     

<path d="M 69 213 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Viridian City"
        data-bind="
        click:function(){MapHelper.moveToTown('Viridian City')},
        attr: { class: MapHelper.calculateTownCssClass('Viridian City') },
        "

        d="M 71.8 214.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Pewter City-->
    

<path d="M 70 108 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Pewter City"
        data-bind="
        click:function(){MapHelper.moveToTown('Pewter City')},
        attr: { class: MapHelper.calculateTownCssClass('Pewter City') },
        "

        d="M 72.8 109.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

     <!--Cerulean City-->
     

<path d="M 338 80 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Cerulean City"
        data-bind="
        click:function(){MapHelper.moveToTown('Cerulean City')},
        attr: { class: MapHelper.calculateTownCssClass('Cerulean City') },
        "

        d="M 340.8 81.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Vermillion City-->
    

<path d="M 337 241 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Vermillion City"
        data-bind="
        click:function(){MapHelper.moveToTown('Vermillion City')},
        attr: { class: MapHelper.calculateTownCssClass('Vermillion City') },
        "

        d="M 339.8 242.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

     <!--Lavender Town-->
     

<path d="M 444 160 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Lavender Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Lavender Town')},
        attr: { class: MapHelper.calculateTownCssClass('Lavender Town') },
        "

        d="M 446.8 161.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Celadon City-->
    

<path d="M 257 161 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Celadon City"
        data-bind="
        click:function(){MapHelper.moveToTown('Celadon City')},
        attr: { class: MapHelper.calculateTownCssClass('Celadon City') },
        "

        d="M 259.8 162.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Saffron City-->
    

<path d="M 338 161 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Saffron City"
        data-bind="
        click:function(){MapHelper.moveToTown('Saffron City')},
        attr: { class: MapHelper.calculateTownCssClass('Saffron City') },
        "

        d="M 340.8 162.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Fuchsia City-->
    

<path d="M 284 323 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Fuchsia City"
        data-bind="
        click:function(){MapHelper.moveToTown('Fuchsia City')},
        attr: { class: MapHelper.calculateTownCssClass('Fuchsia City') },
        "

        d="M 286.8 324.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Cinnabar Island-->
    

<path d="M 68 375 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Cinnabar Island"
        data-bind="
        click:function(){MapHelper.moveToTown('Cinnabar Island')},
        attr: { class: MapHelper.calculateTownCssClass('Cinnabar Island') },
        "

        d="M 70.8 376.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Indigo Plateau Kanto-->
    

<path d="M 16 81 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Indigo Plateau Kanto"
        data-bind="
        click:function(){MapHelper.moveToTown('Indigo Plateau Kanto')},
        attr: { class: MapHelper.calculateTownCssClass('Indigo Plateau Kanto') },
        "

        d="M 18.8 82.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>




    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Viridian Forest-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="76" y="156">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Viridian Forest')},
    attr: { class: MapHelper.calculateTownCssClass('Viridian Forest') }"
    class="city" data-town="Viridian Forest"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="77.5" y="157.5">
</rect>

    <!--Digletts Cave-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="76" y="133">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Digletts Cave')},
    attr: { class: MapHelper.calculateTownCssClass('Digletts Cave') }"
    class="city" data-town="Digletts Cave"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="77.5" y="134.5">
</rect>

    <!--Mt. Moon-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="182" y="90">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Mt. Moon')},
    attr: { class: MapHelper.calculateTownCssClass('Mt. Moon') }"
    class="city" data-town="Mt. Moon"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="183.5" y="91.5">
</rect>

    <!--Rock Tunnel-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="451" y="81">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Rock Tunnel')},
    attr: { class: MapHelper.calculateTownCssClass('Rock Tunnel') }"
    class="city" data-town="Rock Tunnel"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="452.5" y="82.5">
</rect>

    <!--Power Plant-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="451" y="104">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Power Plant')},
    attr: { class: MapHelper.calculateTownCssClass('Power Plant') }"
    class="city" data-town="Power Plant"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="452.5" y="105.5">
</rect>

    <!--Pokemon Tower-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="458" y="168">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Lavender Town')},
    attr: { class: MapHelper.calculateTownCssClass('Pokemon Tower') }"
    class="city" data-town="Pokemon Tower"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="459.5" y="169.5">
</rect>

    <!--Seafoam Islands-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="181" y="375">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Seafoam Islands')},
    attr: { class: MapHelper.calculateTownCssClass('Seafoam Islands') }"
    class="city" data-town="Seafoam Islands"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="182.5" y="376.5">
</rect>

    <!--Pokemon Mansion-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="83" y="381">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Cinnabar Island')},
    attr: { class: MapHelper.calculateTownCssClass('Pokemon Mansion') }"
    class="city" data-town="Pokemon Mansion"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="84.5" y="382.5">
</rect>

    <!--Victory Road-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="22" y="110">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Victory Road')},
    attr: { class: MapHelper.calculateTownCssClass('Victory Road') }"
    class="city" data-town="Victory Road"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="23.5" y="111.5">
</rect>

    <!--Cerulean Cave-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="349" y="83">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Cerulean City')},
    attr: { class: MapHelper.calculateTownCssClass('Cerulean Cave') }"
    class="city" data-town="Cerulean Cave"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="350.5" y="84.5">
</rect>




    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    
<rect 
    class="city" 
    data-town="Pokemon Day Care"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="345" y="111"
    data-bind="click:function(){BreedingController.openBreedingModal()}, attr: { class: App.game.breeding.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }"
>
</rect>


    
<rect 
    class="city" 
    data-town="Safari Zone"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="292" y="301"
    data-bind="click:function(){Safari.openModal()}, attr: { class: Safari.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }"
>
</rect>


    
<rect 
    class="city" 
    data-town="Underground Entrance"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="380" y="241"
    data-bind="click:function(){Underground.openUndergroundModal()}, attr: { class: Underground.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }"
>
</rect>


    
<rect 
    class="city" 
    data-town="Farm"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="373" y="294"
    data-bind="click:function(){FarmController.openFarmModal()}, attr: { class: App.game.farming.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }"
>
</rect>


    
<rect 
    class="city" 
    data-town="Dock"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="325" y="240"
    data-bind="click:function(){MapHelper.openShipModal()}, css:{ unlockedTown: player.highestRegion() &gt;= 1}"
>
</rect>

</g>

                            <g data-bind='if: player.region == GameConstants.Region.johto'>
    <image width="100%" xlink:href="assets/images/johto.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 26-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(26, 1); } ">
    <rect data-route='26'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(26, 1) }"
        height="31"
        width="135"
        x="515" y="280">
    </rect>

    <text font-size="13px" x="580" y="300">26</text>

</g>


    <!--Route 27-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(27, 1); } ">
    <rect data-route='27'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(27, 1) }"
        height="31"
        width="194"
        x="87" y="-650">
    </rect>

    <text font-size="13px" x="176" y="-628">27</text>

</g>


    <!--Route 28-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(28, 1); } ">
    <rect data-route='28'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(28, 1) }"
        height="31"
        width="92"
        x="527" y="218">
    </rect>

    <text font-size="13px" x="570" y="236">28</text>

</g>


    <!--Route 29-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(29, 1); } ">
    <rect data-route='29'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(29, 1) }"
        height="31"
        width="143"
        x="369" y="280">
    </rect>

    <text font-size="13px" x="420" y="300">29</text>

</g>


    <!--Route 30-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(30, 1); } ">
    <rect data-route='30'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(30, 1) }"
        height="31"
        width="133"
        x="153" y="-372">
    </rect>

    <text font-size="13px" x="209" y="-352">30</text>

</g>


    <!--Route 31-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(31, 1); } ">
    <rect data-route='31'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(31, 1) }"
        height="31"
        width="68"
        x="304" y="124">
    </rect>

    <text font-size="13px" x="330" y="144">31</text>

</g>


    <!--Route 32-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(32, 1); } ">
    <rect data-route='32'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(32, 1) }"
        height="31"
        width="215"
        x="154" y="-310">
    </rect>

    <text font-size="13px" x="255" y="-291">32</text>

</g>


    <!--Route 33-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(33, 1); } ">
    <rect data-route='33'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(33, 1) }"
        height="31"
        width="101"
        x="209" y="369">
    </rect>

    <text font-size="13px" x="250" y="389">33</text>

</g>


    <!--Route 34-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(34, 1); } ">
    <rect data-route='34'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(34, 1) }"
        height="31"
        width="131"
        x="268" y="-187">
    </rect>

    <text font-size="13px" x="319" y="-168">34</text>

</g>


    <!--Route 35-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(35, 1); } ">
    <rect data-route='35'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(35, 1) }"
        height="31"
        width="75"
        x="156" y="-187">
    </rect>

    <text font-size="13px" x="178" y="-168">35</text>

</g>


    <!--Route 36-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(36, 1); } ">
    <rect data-route='36'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(36, 1) }"
        height="31"
        width="132"
        x="155" y="125">
    </rect>

    <text font-size="13px" x="220" y="144">36</text>

</g>


    <!--Route 37-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(37, 1); } ">
    <rect data-route='37'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(37, 1) }"
        height="38"
        width="32"
        x="216" y="87">
    </rect>

    <text font-size="13px" x="223" y="114">37</text>

</g>


    <!--Route 38-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(38, 1); } ">
    <rect data-route='38'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(38, 1) }"
        height="31"
        width="100"
        x="125" y="63">
    </rect>

    <text font-size="13px" x="163" y="82">38</text>

</g>


    <!--Route 39-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(39, 1); } ">
    <rect data-route='39'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(39, 1) }"
        height="32"
        width="75"
        x="63" y="-125">
    </rect>

    <text font-size="13px" x="89" y="-106">39</text>

</g>


    <!--Route 40-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(40, 1); } ">
    <rect data-route='40'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(40, 1) }"
        height="33"
        width="75"
        x="151" y="-94">
    </rect>

    <text font-size="13px" x="183" y="-76">40</text>

</g>


    <!--Route 41-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(41, 1); } ">
    <rect data-route='41'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(41, 1) }"
        height="33"
        width="86"
        x="226" y="-94">
    </rect>

    <text font-size="13px" x="257" y="-76">41</text>

</g>


    <!--Route 42-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(42, 1); } ">
    <rect data-route='42'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(42, 1) }"
        height="31"
        width="141"
        x="240" y="63">
    </rect>

    <text font-size="13px" x="300" y="82">42</text>

</g>


    <!--Route 43-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(43, 1); } ">
    <rect data-route='43'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(43, 1) }"
        height="31"
        width="63"
        x="0" y="-403">
    </rect>

    <text font-size="13px" x="27" y="-384">43</text>

</g>


    <!--Route 44-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(44, 1); } ">
    <rect data-route='44'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(44, 1) }"
        height="31"
        width="102"
        x="393" y="63">
    </rect>

    <text font-size="13px" x="440" y="82">44</text>

</g>


    <!--Route 45-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(45, 1); } ">
    <rect data-route='45'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(45, 1) }"
        height="31"
        width="105"
        x="113" y="-496">
    </rect>

    <text font-size="13px" x="155" y="-475">45</text>

</g>


    <!--Route 46-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(46, 1); } ">
    <rect data-route='46'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(46, 1) }"
        height="32"
        width="93"
        x="187" y="-465">
    </rect>

    <text font-size="13px" x="226" y="-445">46</text>

</g>


     <!--Route 47-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(47, 1); } ">
    <rect data-route='47'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(47, 1) }"
        height="32"
        width="32"
        x="0" y="280">
    </rect>

    <text font-size="13px" x="8" y="300">47</text>

</g>


    <!--Route 48-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(48, 1); } ">
    <rect data-route='48'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(48, 1) }"
        height="64"
        width="32"
        x="0" y="217">
    </rect>

    <text font-size="13px" x="8" y="250">48</text>

</g>





    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--New Bark Town-->
    

<path d="M 498 290 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="New Bark Town"
        data-bind="
        click:function(){MapHelper.moveToTown('New Bark Town')},
        attr: { class: MapHelper.calculateTownCssClass('New Bark Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        "

        d="M 500.8 291.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Cherrygrove City-->
    

<path d="M 342 291 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Cherrygrove City"
        data-bind="
        click:function(){MapHelper.moveToTown('Cherrygrove City')},
        attr: { class: MapHelper.calculateTownCssClass('Cherrygrove City') },
        "

        d="M 344.8 292.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Violet City-->
    

<path d="M 281 135 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Violet City"
        data-bind="
        click:function(){MapHelper.moveToTown('Violet City')},
        attr: { class: MapHelper.calculateTownCssClass('Violet City') },
        "

        d="M 283.8 136.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Azalea Town-->
    

<path d="M 187 379 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Azalea Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Azalea Town')},
        attr: { class: MapHelper.calculateTownCssClass('Azalea Town') },
        "

        d="M 189.8 380.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Goldenrod City-->
    

<path d="M 157 229 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  40  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Goldenrod City"
        data-bind="
        click:function(){MapHelper.moveToTown('Goldenrod City')},
        attr: { class: MapHelper.calculateTownCssClass('Goldenrod City') },
        "

        d="M 159.8 230.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  37.8  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Ecruteak City-->
    

<path d="M 218 73 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Ecruteak City"
        data-bind="
        click:function(){MapHelper.moveToTown('Ecruteak City')},
        attr: { class: MapHelper.calculateTownCssClass('Ecruteak City') },
        "

        d="M 220.8 74.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Olivine City-->
    

<path d="M 63 135 
         l 8.29 -8.29 
         h  45  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -45  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Olivine City"
        data-bind="
        click:function(){MapHelper.moveToTown('Olivine City')},
        attr: { class: MapHelper.calculateTownCssClass('Olivine City') },
        "

        d="M 65.8 136.2 
           l 6.63 -6.63 
           h  42.8  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -42.8 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Cianwood City-->
    

<path d="M 32 290 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Cianwood City"
        data-bind="
        click:function(){MapHelper.moveToTown('Cianwood City')},
        attr: { class: MapHelper.calculateTownCssClass('Cianwood City') },
        "

        d="M 34.8 291.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Mahogany Town-->
    

<path d="M 373 74 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Mahogany Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Mahogany Town')},
        attr: { class: MapHelper.calculateTownCssClass('Mahogany Town') },
        "

        d="M 375.8 75.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Blackthorn City-->
    

<path d="M 467 103 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Blackthorn City"
        data-bind="
        click:function(){MapHelper.moveToTown('Blackthorn City')},
        attr: { class: MapHelper.calculateTownCssClass('Blackthorn City') },
        "

        d="M 469.8 104.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Indigo Plateau 2.0-->
    

<path d="M 621 72 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Indigo Plateau Johto"
        data-bind="
        click:function(){MapHelper.moveToTown('Indigo Plateau Johto')},
        attr: { class: MapHelper.calculateTownCssClass('Indigo Plateau Johto') },
        "

        d="M 623.8 73.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>




    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Sprout Tower-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="295" y="125">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Violet City')},
    attr: { class: MapHelper.calculateTownCssClass('Sprout Tower') }"
    class="city" data-town="Sprout Tower"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="296.5" y="126.5">
</rect>

    <!--Ruins of Alph-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="287" y="180">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Ruins of Alph')},
    attr: { class: MapHelper.calculateTownCssClass('Ruins of Alph') }"
    class="city" data-town="Ruins of Alph"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="288.5" y="181.5">
</rect>

    <!--Union Cave-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="287" y="326">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Union Cave')},
    attr: { class: MapHelper.calculateTownCssClass('Union Cave') }"
    class="city" data-town="Union Cave"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="288.5" y="327.5">
</rect>

    <!--Slowpoke Well-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="207" y="377">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Azalea Town')},
    attr: { class: MapHelper.calculateTownCssClass('Slowpoke Well') }"
    class="city" data-town="Slowpoke Well"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="208.5" y="378.5">
</rect>

    <!--Ilex Forest-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="162" y="378">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Ilex Forest')},
    attr: { class: MapHelper.calculateTownCssClass('Ilex Forest') }"
    class="city" data-town="Ilex Forest"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="163.5" y="379.5">
</rect>

    <!--Burned Tower-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="213" y="53">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Burned Tower')},
    attr: { class: MapHelper.calculateTownCssClass('Burned Tower') }"
    class="city" data-town="Burned Tower"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="214.5" y="54.5">
</rect>

    <!--Tin Tower-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="237" y="53">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Tin Tower')},
    attr: { class: MapHelper.calculateTownCssClass('Tin Tower') }"
    class="city" data-town="Tin Tower"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="238.5" y="54.5">
</rect>

    <!--Whirl Islands-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="71" y="284">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Whirl Islands')},
    attr: { class: MapHelper.calculateTownCssClass('Whirl Islands') }"
    class="city" data-town="Whirl Islands"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="72.5" y="285.5">
</rect>

    <!--Mt Mortar-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="325" y="71">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Mt Mortar')},
    attr: { class: MapHelper.calculateTownCssClass('Mt Mortar') }"
    class="city" data-town="Mt Mortar"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="326.5" y="72.5">
</rect>

    <!--Ice Path-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="473" y="71">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Ice Path')},
    attr: { class: MapHelper.calculateTownCssClass('Ice Path') }"
    class="city" data-town="Ice Path"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="474.5" y="72.5">
</rect>

    <!--Dark Cave-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="471" y="182">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Dark Cave')},
    attr: { class: MapHelper.calculateTownCssClass('Dark Cave') }"
    class="city" data-town="Dark Cave"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="472.5" y="183.5">
</rect>

    <!--Mt Silver-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="525" y="226">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Mt Silver')},
    attr: { class: MapHelper.calculateTownCssClass('Mt Silver') }"
    class="city" data-town="Mt Silver"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="526.5" y="227.5">
</rect>




    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    
<rect 
    class="city" 
    data-town="Dock"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="98" y="155"
    data-bind="click:function(){MapHelper.openShipModal()}, attr: { class: MapHelper.calculateTownCssClass(&#39;Olivine City&#39;) }"
>
</rect>


</g>

                            <g data-bind='if: player.region == GameConstants.Region.hoenn'>
    <image width="100%" xlink:href="assets/images/hoenn.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 101-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(101, 2); } ">
    <rect data-route='101'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(101, 2) }"
        height="23"
        width="40"
        x="280" y="-120">
    </rect>

    <text font-size="13px" x="289" y="-105">101</text>

</g>


    <!--Route 102-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(102, 2); } ">
    <rect data-route='102'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(102, 2) }"
        height="23"
        width="50"
        x="50" y="262">
    </rect>

    <text font-size="13px" x="62" y="279">102</text>

</g>


    <!--Route 103-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(103, 2); } ">
    <rect data-route='103'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(103, 2) }"
        height="23"
        width="89"
        x="97" y="239">
    </rect>

    <text font-size="13px" x="130" y="256">103</text>

</g>


    <!--Route 104-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(104, 2); } ">
    <rect data-route='104'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(104, 2) }"
        height="23"
        width="95"
        x="190" y="-30">
    </rect>

    <text font-size="13px" x="243" y="-14">104</text>

</g>


    <!--Route 105-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(105, 2); } ">
    <rect data-route='105'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(105, 2) }"
        height="23"
        width="65"
        x="285" y="-31">
    </rect>

    <text font-size="13px" x="306" y="-15">105</text>

</g>


    <!--Route 106-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(106, 2); } ">
    <rect data-route='106'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(106, 2) }"
        height="24"
        width="68"
        x="8" y="350">
    </rect>

    <text font-size="13px" x="30" y="367">106</text>

</g>


    <!--Route 107-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(107, 2); } ">
    <rect data-route='107'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(107, 2) }"
        height="24"
        width="66"
        x="76" y="373">
    </rect>

    <text font-size="13px" x="97" y="390">107</text>

</g>


    <!--Route 108-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(108, 2); } ">
    <rect data-route='108'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(108, 2) }"
        height="24"
        width="44"
        x="142" y="373">
    </rect>

    <text font-size="13px" x="152" y="390">108</text>

</g>


    <!--Route 109-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(109, 2); } ">
    <rect data-route='109'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(109, 2) }"
        height="24"
        width="64"
        x="333" y="-210">
    </rect>

    <text font-size="13px" x="353" y="-194">109</text>

</g>


    <!--Route 110-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(110, 2); } ">
    <rect data-route='110'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(110, 2) }"
        height="23"
        width="88"
        x="199" y="-209">
    </rect>

    <text font-size="13px" x="229" y="-193">110</text>

</g>


    <!--Route 111-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(111, 2); } ">
    <rect data-route='111'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(111, 2) }"
        height="23"
        width="131"
        x="38" y="-209">
    </rect>

    <text font-size="13px" x="100" y="-193">111</text>

</g>


    <!--Route 112-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(112, 2); } ">
    <rect data-route='112'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(112, 2) }"
        height="46"
        width="50"
        x="136" y="106">
    </rect>

    <text font-size="13px" x="154" y="144">112</text>

</g>


    <!--Route 113-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(113, 2); } ">
    <rect data-route='113'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(113, 2) }"
        height="23"
        width="99"
        x="87" y="38">
    </rect>

    <text font-size="13px" x="120" y="55">113</text>

</g>


    <!--Route 114-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(114, 2); } ">
    <rect data-route='114'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(114, 2) }"
        height="24"
        width="68"
        x="38" y="-65">
    </rect>

    <text font-size="13px" x="62" y="-49">114</text>

</g>


    <!--Route 114 extension-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(114, 2); } ">
    <rect data-route='114'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(114, 2) }"
        height="15"
        width="23"
        x="83" y="-42">
    </rect>

</g>


    <!--Route 115-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(115, 2); } ">
    <rect data-route='115'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(115, 2) }"
        height="23"
        width="73"
        x="83" y="-31">
    </rect>

    <text font-size="13px" x="108" y="-15">115</text>

</g>


    <!--Route 116-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(116, 2); } ">
    <rect data-route='116'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(116, 2) }"
        height="23"
        width="90"
        x="31" y="150">
    </rect>

    <text font-size="13px" x="52" y="167">116</text>

</g>


    <!--Route 117-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(117, 2); } ">
    <rect data-route='117'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(117, 2) }"
        height="23"
        width="61"
        x="118" y="172">
    </rect>

    <text font-size="13px" x="137" y="189">117</text>

</g>


    <!--Route 118-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(118, 2); } ">
    <rect data-route='118'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(118, 2) }"
        height="23"
        width="43"
        x="233" y="172">
    </rect>

    <text font-size="13px" x="240" y="189">118</text>

</g>


    <!--Route 119-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(119, 2); } ">
    <rect data-route='119'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(119, 2) }"
        height="23"
        width="134"
        x="38" y="-276">
    </rect>

    <text font-size="13px" x="100" y="-261">119</text>

</g>


    <!--Route 120-->
    

<g

    transform="rotate(90,0,0)"

    data-bind="click:function(){ MapHelper.moveToRoute(120, 2); } ">
    <rect data-route='120'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(120, 2) }"
        height="23"
        width="90"
        x="38" y="-321">
    </rect>

    <text font-size="13px" x="73" y="-305">120</text>

</g>


    <!--Route 121-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(121, 2); } ">
    <rect data-route='121'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(121, 2) }"
        height="23"
        width="109"
        x="321" y="105">
    </rect>

    <text font-size="13px" x="365" y="123">121</text>

</g>


    <!--Route 122-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(122, 2); } ">
    <rect data-route='122'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(122, 2) }"
        height="45"
        width="45"
        x="359" y="127">
    </rect>

    <text font-size="13px" x="369" y="143">122</text>

</g>


    <!--Route 123-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(123, 2); } ">
    <rect data-route='123'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(123, 2) }"
        height="23"
        width="135"
        x="275" y="172">
    </rect>

    <text font-size="13px" x="325" y="189">123</text>

</g>


    <!--Route 124-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(124, 2); } ">
    <rect data-route='124'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(124, 2) }"
        height="90"
        width="68"
        x="477" y="83">
    </rect>

    <text font-size="13px" x="506" y="120">124</text>

</g>


    <!--Route 125-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(125, 2); } ">
    <rect data-route='125'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(125, 2) }"
        height="90"
        width="68"
        x="544" y="83">
    </rect>

    <text font-size="13px" x="555" y="120">125</text>

</g>


    <!--Route 126-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(126, 2); } ">
    <rect data-route='126'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(126, 2) }"
        height="91"
        width="68"
        x="477" y="172">
    </rect>

    <text font-size="13px" x="504" y="210">126</text>

</g>


    <!--Route 127-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(127, 2); } ">
    <rect data-route='127'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(127, 2) }"
        height="90"
        width="68"
        x="544" y="172">
    </rect>

    <text font-size="13px" x="555" y="210">127</text>

</g>


    <!--Route 128-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(128, 2); } ">
    <rect data-route='128'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(128, 2) }"
        height="23"
        width="67"
        x="544" y="261">
    </rect>

    <text font-size="13px" x="576" y="279">128</text>

</g>


    <!--Route 129-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(129, 2); } ">
    <rect data-route='129'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(129, 2) }"
        height="23"
        width="48"
        x="564" y="284">
    </rect>

    <text font-size="13px" x="576" y="301">129</text>

</g>


    <!--Route 130-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(130, 2); } ">
    <rect data-route='130'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(130, 2) }"
        height="23"
        width="64"
        x="500" y="284">
    </rect>

    <text font-size="13px" x="520" y="301">130</text>

</g>


    <!--Route 131-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(131, 2); } ">
    <rect data-route='131'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(131, 2) }"
        height="23"
        width="67"
        x="433" y="284">
    </rect>

    <text font-size="13px" x="453" y="301">131</text>

</g>


    <!--Route 132-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(132, 2); } ">
    <rect data-route='132'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(132, 2) }"
        height="23"
        width="67"
        x="346" y="284">
    </rect>

    <text font-size="13px" x="365" y="301">132</text>

</g>


    <!--Route 133-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(133, 2); } ">
    <rect data-route='133'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(133, 2) }"
        height="23"
        width="69"
        x="277" y="284">
    </rect>

    <text font-size="13px" x="297" y="301">133</text>

</g>


    <!--Route 134-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(134, 2); } ">
    <rect data-route='134'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(134, 2) }"
        height="23"
        width="66"
        x="211" y="284">
    </rect>

    <text font-size="13px" x="230" y="301">134</text>

</g>





    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--Littleroot Town-->
    

<path d="M 94 323 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Littleroot Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Littleroot Town')},
        attr: { class: MapHelper.calculateTownCssClass('Littleroot Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        "

        d="M 96.8 324.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Oldale Town-->
    

<path d="M 94 267 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Oldale Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Oldale Town')},
        attr: { class: MapHelper.calculateTownCssClass('Oldale Town') },
        "

        d="M 96.8 268.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Petalburg City-->
    

<path d="M 28 267 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Petalburg City"
        data-bind="
        click:function(){MapHelper.moveToTown('Petalburg City')},
        attr: { class: MapHelper.calculateTownCssClass('Petalburg City') },
        "

        d="M 30.8 268.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Rustboro City-->
    

<path d="M 5 160 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  40  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Rustboro City"
        data-bind="
        click:function(){MapHelper.moveToTown('Rustboro City')},
        attr: { class: MapHelper.calculateTownCssClass('Rustboro City') },
        "

        d="M 7.8 161.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  37.8  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Dewford Town-->
    

<path d="M 50 380 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Dewford Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Dewford Town')},
        attr: { class: MapHelper.calculateTownCssClass('Dewford Town') },
        "

        d="M 52.8 381.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Slateport City-->
    

<path d="M 184 290 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  40  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Slateport City"
        data-bind="
        click:function(){MapHelper.moveToTown('Slateport City')},
        attr: { class: MapHelper.calculateTownCssClass('Slateport City') },
        "

        d="M 186.8 291.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  37.8  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Mauville City-->
    

<path d="M 175 178 
         l 8.29 -8.29 
         h  45  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -45  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Mauville City"
        data-bind="
        click:function(){MapHelper.moveToTown('Mauville City')},
        attr: { class: MapHelper.calculateTownCssClass('Mauville City') },
        "

        d="M 177.8 179.2 
           l 6.63 -6.63 
           h  42.8  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -42.8 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Verdanturf Town-->
    

<path d="M 95 180 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Verdanturf Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Verdanturf Town')},
        attr: { class: MapHelper.calculateTownCssClass('Verdanturf Town') },
        "

        d="M 97.8 181.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Fallarbor Town-->
    

<path d="M 62 44 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Fallarbor Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Fallarbor Town')},
        attr: { class: MapHelper.calculateTownCssClass('Fallarbor Town') },
        "

        d="M 64.8 45.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Lavaridge Town-->
    

<path d="M 119 135 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Lavaridge Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Lavaridge Town')},
        attr: { class: MapHelper.calculateTownCssClass('Lavaridge Town') },
        "

        d="M 121.8 136.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Fortree City-->
    

<path d="M 273 45 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Fortree City"
        data-bind="
        click:function(){MapHelper.moveToTown('Fortree City')},
        attr: { class: MapHelper.calculateTownCssClass('Fortree City') },
        "

        d="M 275.8 46.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--LilyCove City-->
    

<path d="M 425 112 
         l 8.29 -8.29 
         h  45  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -45  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="LilyCove City"
        data-bind="
        click:function(){MapHelper.moveToTown('LilyCove City')},
        attr: { class: MapHelper.calculateTownCssClass('LilyCove City') },
        "

        d="M 427.8 113.2 
           l 6.63 -6.63 
           h  42.8  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -42.8 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Mossdeep City-->
    

<path d="M 540 148 
         l 8.29 -8.29 
         h  45  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -45  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Mossdeep City"
        data-bind="
        click:function(){MapHelper.moveToTown('Mossdeep City')},
        attr: { class: MapHelper.calculateTownCssClass('Mossdeep City') },
        "

        d="M 542.8 149.2 
           l 6.63 -6.63 
           h  42.8  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -42.8 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Sootopolis City-->
    

<path d="M 487 232 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Sootopolis City"
        data-bind="
        click:function(){MapHelper.moveToTown('Sootopolis City')},
        attr: { class: MapHelper.calculateTownCssClass('Sootopolis City') },
        "

        d="M 489.8 233.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Pacifidlog Town-->
    

<path d="M 408 290 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Pacifidlog Town"
        data-bind="
        click:function(){MapHelper.moveToTown('Pacifidlog Town')},
        attr: { class: MapHelper.calculateTownCssClass('Pacifidlog Town') },
        "

        d="M 410.8 291.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Ever Grande City-->
    

<path d="M 609 269 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Ever Grande City"
        data-bind="
        click:function(){MapHelper.moveToTown('Ever Grande City')},
        attr: { class: MapHelper.calculateTownCssClass('Ever Grande City') },
        "

        d="M 611.8 270.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>

    <!--Pokemon League Hoenn-->
    

<path d="M 609 218 
         l 8.29 -8.29 
         h  11.42  
         l 8.29 8.29 
         v  11.42  
         l -8.29 8.29 
         h  -11.42  
         l -8.29 -8.29 
         Z"
         
      fill="#ffffff" stroke="#000000" stroke-miterlimit="10" stroke-width="1.4">
</path>
<path class="city" data-town="Pokemon League Hoenn"
        data-bind="
        click:function(){MapHelper.moveToTown('Pokemon League Hoenn')},
        attr: { class: MapHelper.calculateTownCssClass('Pokemon League Hoenn') },
        "

        d="M 611.8 219.2 
           l 6.63 -6.63 
           h  9.14  
           l 6.63 6.63 
           v  9.14  
           l -6.63 6.63 
           h  -9.14 
           l -6.63 -6.63 
           Z"

        fill="url(#mx-gradient-f8cecc-1-ea583b-1-s-0)" stroke="#b85450"
        stroke-miterlimit="10" stroke-width="1.4">
</path>




    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Petalburg Woods-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="11" y="217">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Petalburg Woods')},
    attr: { class: MapHelper.calculateTownCssClass('Petalburg Woods') }"
    class="city" data-town="Petalburg Woods"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="12.5" y="218.5">
</rect>

    <!--Rusturf Tunnel-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="101" y="152">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Rusturf Tunnel')},
    attr: { class: MapHelper.calculateTownCssClass('Rusturf Tunnel') }"
    class="city" data-town="Rusturf Tunnel"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="102.5" y="153.5">
</rect>

    <!--Granite Cave-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="32" y="377">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Granite Cave')},
    attr: { class: MapHelper.calculateTownCssClass('Granite Cave') }"
    class="city" data-town="Granite Cave"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="33.5" y="378.5">
</rect>

    <!--New Mauville-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="212" y="200">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('New Mauville')},
    attr: { class: MapHelper.calculateTownCssClass('New Mauville') }"
    class="city" data-town="New Mauville"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="213.5" y="201.5">
</rect>

    <!--Meteor Falls-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="28" y="87">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Meteor Falls')},
    attr: { class: MapHelper.calculateTownCssClass('Meteor Falls') }"
    class="city" data-town="Meteor Falls"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="29.5" y="88.5">
</rect>

    <!--Fiery Path-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="158" y="109">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Fiery Path')},
    attr: { class: MapHelper.calculateTownCssClass('Fiery Path') }"
    class="city" data-town="Fiery Path"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="159.5" y="110.5">
</rect>

    <!--Jagged Pass-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="137" y="109">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Jagged Pass')},
    attr: { class: MapHelper.calculateTownCssClass('Jagged Pass') }"
    class="city" data-town="Jagged Pass"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="138.5" y="110.5">
</rect>

    <!--Mt. Chimney-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="136" y="85">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Mt. Chimney')},
    attr: { class: MapHelper.calculateTownCssClass('Mt. Chimney') }"
    class="city" data-town="Mt. Chimney"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="137.5" y="86.5">
</rect>

    <!--Mt. Pyre-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="386" y="148">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Mt. Pyre')},
    attr: { class: MapHelper.calculateTownCssClass('Mt. Pyre') }"
    class="city" data-town="Mt. Pyre"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="387.5" y="149.5">
</rect>

    <!--Shoal Cave-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="587" y="113">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Shoal Cave')},
    attr: { class: MapHelper.calculateTownCssClass('Shoal Cave') }"
    class="city" data-town="Shoal Cave"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="588.5" y="114.5">
</rect>

    <!--Seafloor Cavern-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="552" y="265">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Seafloor Cavern')},
    attr: { class: MapHelper.calculateTownCssClass('Seafloor Cavern') }"
    class="city" data-town="Seafloor Cavern"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="553.5" y="266.5">
</rect>

    <!--Sky Pillar-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="465" y="265">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Sky Pillar')},
    attr: { class: MapHelper.calculateTownCssClass('Sky Pillar') }"
    class="city" data-town="Sky Pillar"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="466.5" y="266.5">
</rect>

    <!--Cave of Origin-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="460" y="197">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Cave of Origin')},
    attr: { class: MapHelper.calculateTownCssClass('Cave of Origin') }"
    class="city" data-town="Cave of Origin"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="461.5" y="198.5">
</rect>

    <!--Hoenn Victory Road-->
    

<rect fill="#ffffff" height="15" stroke="none" width="15"
    x="615" y="241">
</rect>
<rect data-bind="
    click:function(){MapHelper.moveToTown('Victory Road Hoenn')},
    attr: { class: MapHelper.calculateTownCssClass('Victory Road Hoenn') }"
    class="city" data-town="Victory Road Hoenn"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)"
    height="12" stroke="#6c8ebf" width="12" x="616.5" y="242.5">
</rect>




    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    
<rect 
    class="city" 
    data-town="Dock"
    fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" 
    stroke="#6c8ebf"
    height="12.6" width="12.6"
    x="209" y="290"
    data-bind="click:function(){MapHelper.openShipModal()}, attr: { class: MapHelper.calculateTownCssClass(&#39;Slateport City&#39;) }"
>
</rect>




</g>


                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!--Right column-->
        <div id="right-column" class="col-lg-3 col-md-6">

            <!-- Oak Items -->
            <div id="oakItemsContainer" class="card sortable border-secondary mb-3" data-bind="visible: App.game.oakItems.canAccess()">
    <div class="card-header p-0" data-toggle="collapse" href="#oakItemsBody">
        <span style="text-align:center">Oak Items</span>
    </div>
    <button class='btn btn-sm btn-primary' style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;" href="#oakItemsModal" data-toggle="modal">
        List
    </button>
    <div id="oakItemsBody" class="card-body show p-0">
      <table class="table table-bordered table-striped m-0">
        <!--
        <thead>
          <tr>
            <td class="clickable table-primary p-0" colspan="2" href="#oakItemsModal" data-toggle="modal">
              Open menu
            </td>
          <tr>
        </thead>
        -->
        <tbody data-bind="foreach: App.game.oakItems.itemList">
          <tr data-bind="if: $data.isActive, tooltip: { html: true, title: $data.tooltip, trigger: 'hover', placement:'bottom' }">
            <td class="tight p-1">
              <img class="clickable" href="#oakItemsModal" data-toggle="modal" src="" data-bind="attr:{ src: 'assets/images/oakitems/' + OakItems.OakItem[$data.name] + '.png'}" width="32px">
            </td>
            <td class="p-0">
              <div class="progress" style="height: 40px;">
                  <div class="progress-bar bg-primary" role="progressbar"
                      data-bind="attr:{ style: 'width:' + ($data.isMaxLevel() ? 100 : $data.expPercentage) + '%' },
                         css: {
                           'bg-success': $data.hasEnoughExp() && !$data.isMaxLevel(),
                           'bg-primary': !$data.hasEnoughExp() || $data.isMaxLevel(),
                         }"
                      aria-valuemin="0" aria-valuemax="100">
                      <!-- ko if: !$data.hasEnoughExp() && !$data.isMaxLevel() -->
                      <span data-bind="text: $data.progressString" style="font-size: 15px;"></span>
                      <!-- /ko -->
                      <!-- ko if: $data.hasEnoughExp() && !$data.isMaxLevel() -->
                      <span class="clickable" data-bind="html: 'Upgrade (' + $data.calculateCost().amount.toLocaleString('en-US') + ' <img src=assets/images/currency/money.png height=18px/>)',
                        click: function(){ $data.buy(); }" style="font-size: 15px;">
                        Upgrade
                      </span>
                      <!-- /ko -->
                      <!-- ko if: $data.isMaxLevel() -->
                      <span style="font-size: 15px;">MAX LEVEL!</span>
                      <!-- /ko -->
                  </div>
              </div>
            </td>
          </tr>
        </tbody>
        <!-- ko if: App.game.oakItems.hasAvailableSlot() -->
        <tfoot>
          <tr>
            <td class="clickable table-warning text-light" colspan="2" href="#oakItemsModal" data-toggle="modal">
              Equip another oak item!
            </td>
          </tr>
        </tfoot>
        <!-- /ko -->
      </table>
    </div>

</div>


            <!-- Current Quest -->
            <div id="questDisplayContainer" class="card sortable border-secondary mb-3">

    <div class="card-header p-0" data-toggle="collapse" href="#questDisplayBody">
      <span data-bind='text: !player.tutorialComplete() ? "Tutorial Quest" : "Quests (" + player.currentQuests().length + "/" + QuestHelper.questSlots()() + ")"'></span>
    </div>
    <button class='btn btn-sm btn-primary' style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;"
            data-bind='visible: player.tutorialComplete(), click: function(){$("#QuestModal").modal("show")}'>
        List
    </button>

    <div id="questDisplayBody" class="card-body p-0 show">
      <!-- List of quests -->
      <div data-bind="foreach: player.currentQuests">
          <div class="card border-bottom-0">
              <table width="100%">
                  <tr class="text-center">
                      <td colspan="2" data-bind="text: QuestHelper.questList()[$data.index].description"></td>
                  </tr>
                  <tr>
                      <td width="70%" class="p-0">
                          <div class="progress p-0">
                              <div class="progress-bar bg-primary" role="progressbar"
                                  data-bind="attr:{ style: 'width:' + (QuestHelper.questList()[$data.index].progress() * 100) + '%'}"
                                  aria-valuemin="0" aria-valuemax="100">
                                  <span data-bind="text: QuestHelper.questList()[$data.index].progressText">0 / 1000</span>
                              </div>
                          </div>
                      </td>
                      <td width="30%" class="p-0">
                          <button class="btn btn-sm btn-block p-0"
                                  data-bind='
                                      click: function(){
                                          QuestHelper.questList()[$data.index].isCompleted() ?
                                          QuestHelper.questList()[$data.index].endQuest() :
                                          QuestHelper.questList()[$data.index].endQuest(true);
                                        },
                                      text: QuestHelper.questList()[$data.index].isCompleted() ? "Claim" : "Quit",
                                      css: {
                                        "btn-success": QuestHelper.questList()[$data.index].isCompleted(),
                                        "btn-danger": !QuestHelper.questList()[$data.index].isCompleted(),
                                      }'>
                          </button>
                      </td>
                  </tr>
              </table>
          </div>
      </div>
      <!-- ko if: player.currentQuests().length == 0 && player.tutorialComplete()-->
        <span class="pt-2 pb-2">No active quest</span>
      <!-- /ko -->
      <div data-bind='if: (!player.tutorialComplete()) && (QuestLineHelper.tutorial.totalQuests > 0) && (QuestLineHelper.tutorial.curQuest() < QuestLineHelper.tutorial.totalQuests)'>
          <div class="card border-bottom-0">
              <table>
                  <tr class="text-center">
                      <td data-bind="text: QuestLineHelper.tutorial.curQuestObject().description"></td>
                  </tr>
                  <tr>
                      <td class="p-2">
                          <div class="progress p-0">
                              <div class="progress-bar bg-success" role="progressbar"
                                  data-bind="attr:{ style: 'width:' + (QuestLineHelper.tutorial.curQuestObject().progress() * 100) + '%'}"
                                  aria-valuemin="0" aria-valuemax="100">
                                  <span data-bind="text: ko.pureComputed(function(){return QuestLineHelper.tutorial.curQuestObject().progressText()})">0/1000</span>
                              </div>
                          </div>
                      </td>
                  </tr>
              </table>
          </div>
      </div>
  </div>
</div>


            <!-- Egg Slots/Breeding-->
            <div id="breedingDisplay" class="card sortable border-secondary mb-3" data-bind="visible: App.game.breeding.canAccess()">
    <div class="card-header p-0" data-toggle="collapse" href="#eggList">
        <span>Hatchery</span>
    </div>
    <button class='btn btn-sm btn-primary' style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;"
            data-bind='click: function(){ BreedingController.openBreedingModal() }'>
        List
    </button>
    <div id='eggList' class="card-body p-0 show">
      <div class="row m-0" data-bind="foreach: App.game.breeding.eggList">
        <div class="col-3 col-md-6 p-0 eggSlot">
          <div class="content">
            <div data-bind="if: $index() === App.game.breeding.eggSlots">
                <p>
                  <br/>
                  <span data-bind="template: { name: 'currencyTemplate', data: {'amount': App.game.breeding.nextEggSlotCost().amount, 'currency': GameConstants.Currency.questPoint}}"></span>
                </p>
                <button class='btn btn-primary' onclick='App.game.breeding.buyEggSlot()'
                        data-bind='css: {disabled: App.game.wallet.currencies[GameConstants.Currency.questPoint] <= App.game.breeding.nextEggSlotCost().amount}'>Unlock</button>
            </div>
            <div data-bind="visible: $index() > App.game.breeding.eggSlots" style="margin-top: 20px;">
                <img src="assets/images/breeding/lock.svg">
            </div>
            <!-- ko ifnot: $data.isNone() -->
            <div style="margin-top: 20px;" class="clickable" data-bind="click: function(){ if (progress() >= 100) App.game.breeding.hatchPokemonEgg($index()) }">
                <!-- ko if: $data.type == EggType.Fossil -->
                <img data-bind='attr: {src: BreedingController.getEggImage($data)}'/>
                <!-- /ko -->
                <!-- ko ifnot: $data.type == EggType.Fossil -->
                <div data-bind="template: { name: 'eggSVGTemplate', data: $data}"></div>
                <!-- /ko -->

                <div class="progress" data-bind='visible: progress() < 100'>
                    <div class="progress-bar bg-success" role="progressbar"
                         data-bind="attr:{ style: 'width:' + $data.progress() + '%' }"
                         aria-valuemin="0" aria-valuemax="100">
                        <!-- ko if: Settings.getSetting('breedingDisplay').observableValue() == 'stepCount' -->
                        <span data-bind="text: $data.progressText()"></span>
                        <!-- /ko -->
                        <!-- ko if: Settings.getSetting('breedingDisplay').observableValue() == 'percentage' -->
                        <span data-bind="text: Math.floor($data.progress()) + '%'"></span>
                        <!-- /ko -->
                    </div>
                </div>
                <div class="progress" data-bind='visible: progress() >= 100'>
                    <div class="progress-bar bg-success" role="progressbar"
                    data-bind="attr:{ style: 'width: 100%; cursor: pointer;' }, text: 'Hatch!'"
                    aria-valuemin="0" aria-valuemax="100">
                    </div>
                </div>
            </div>
            <!-- /ko -->
          </div>
        </div>
      </div>
    </div>
</div>


            <!-- Shortcuts Menu -->
            <div id="shortcutsContainer" class="card sortable border-secondary mb-3" data-bind="visible: player.highestRegion">
    <div class="card-header p-0" data-toggle="collapse" href="#shortcutsBody">
        <span style="text-align:center">Shortcuts</span>
    </div>
    <div id="shortcutsBody" class="card-body show p-0">
      <table class="table table-sm m-0">
        <tbody>
          <tr data-bind="visible: Underground.canAccess">
            <td class="p-0">
              <button class="btn btn-block btn-primary m-0" onclick="Underground.openUndergroundModal()">
                  Underground
              </button>
            </td>
          </tr>
          <tr data-bind="visible: App.game.farming.canAccess">
            <td class="p-0">
              <button class="btn btn-block btn-primary m-0" onclick="FarmController.openFarmModal()">
                  Farm
              </button>
            </td>
          </tr>
          <tr data-bind="visible: App.game.statistics.gymsDefeated[Statistics.getGymIndex('Champion Lance')]">
            <td class="p-0">
              <button class="btn btn-block btn-primary m-0" onclick="ShopHandler.showShop(pokeMartShop);player.currentTown('Poké Mart');" href="#shopModal" data-toggle="modal">
                  Poké Mart
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
</div>

        </div>

    </div>
</div>

<!--ShopModal-->
<div class="modal fade noselect" id="shopModal" tabindex="-1" role="dialog"
     aria-labelledby="shopModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 data-bind="text: player.currentTown().endsWith('Mart') ? player.currentTown() : player.currentTown() + ' Shop'">Shop</h4>
                <h4>
                    <img title="Money" src="assets/images/currency/money.png" style="width: 32px;">
                    <span id="playerMoney" data-bind="text: GameConstants.formatNumber(App.game.wallet.currencies[GameConstants.Currency.money])">0</span>
                </h4>
                <h4>
                    <img title="Dungeon Tokens&#013;&#010;Gained by capturing Pokemon" src="assets/images/currency/dungeonToken.png" style="width: 32px;">
                    <span id="playerMoneyDungeon" data-bind="text: GameConstants.formatNumber(App.game.wallet.currencies[GameConstants.Currency.dungeonToken])">0</span>
                </h4>
                <h4>
                    <img title="Quest points" src="assets/images/currency/questPoint.png" style="width: 32px;">
                    <span id="playerMoneyQuest" data-bind="text: GameConstants.formatNumber(App.game.wallet.currencies[GameConstants.Currency.questPoint])">0</span>
                </h4>
                <button type="button" class="btn btn-primary" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row justify-content-center" data-bind="foreach: ShopHandler.shopObservable().items">
                    <div class="col-6 col-sm-4 col-lg-3">
                       <button class="shopItem clickable btn btn-block btn-secondary"
                           data-bind="click: function() {ShopHandler.setSelected($index())},
                           css: { active: ShopHandler.selected() == $index() },
                           attr: { disabled: !$data.isAvailable() }">
                           <span style="position: absolute; top: 15px; right: 20px;" data-bind="if: $data instanceof PokemonItem && App.game.party.alreadyCaughtPokemonByName(name())">
                               <img class="pokeball-smallest" src="" data-bind="attr: {src: `assets/images/pokeball/Pokeball${App.game.party.alreadyCaughtPokemonByName(name(), true) ? '-shiny' : ''}-small.png`}"/>
                           </span>
                           <img src="" height="36px" data-bind="attr:{ src: 'assets/images/items/' + name().replace(/\W/g, '_') + '.png' }">
                           <p data-bind="text: GameConstants.humanifyString(name())">Item Name</p>
                           <div data-bind="if: $data.isAvailable()">
                                <span data-bind="template: { name: 'currencyTemplate', data: {'amount': totalPrice(ShopHandler.amount()), 'currency': currency}}"></span>
                            </div>
                            <div data-bind="ifnot: $data.isAvailable()">
                                <span>Sold Out</span>
                            </div>
                        </button>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-11 col-sm-10 col-md-11">
                        <div class="input-group" style="margin-bottom: 6px; margin-top: 6px">
                            <div class="input-group-prepend">
                                <button class="btn btn-warning btn-outline-dark smallButton smallFont" onclick="ShopHandler.resetAmount()">
                                    Reset
                                </button>
                            </div>
                            <input id="amountOfItems" type="number" class="outline-dark form-control form-control-number"
                                    value="1" min="1" required name="amountOfItems"
                                    oninput="ShopHandler.amount(parseInt($(this).val().toString()) || 0);"
                                    onchange="ShopHandler.amount(parseInt($(this).val().toString()) || 0);" title=""/>
                            <div class="input-group-append">
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.increaseAmount(10)">
                                    +10
                                </button>
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.increaseAmount(100)">
                                    +100
                                </button>
                                <button class="btn btn-primary smallButton smallFont" type="button" onclick="ShopHandler.maxAmount()">
                                    Max
                                </button>
                                <button class="btn-outline-dark" data-bind="attr: {class: ShopHandler.calculateButtonCss()}" onclick="ShopHandler.buyItem()">
                                    Buy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Receive gym badge Modal -->
<div class="modal fade" data-keyboard="false" data-backdrop="static" id="receiveBadgeModal" tabindex="-1" role="dialog"
aria-labelledby="receiveBadgeModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src=""
                    data-bind="attr:{ src: 'assets/images/gymLeaders/' + GymRunner.gymObservable().leaderName + '.png'}">
               <h5 class="modal-title" id="receiveBadgeModalLabel"
                   data-bind="text: GymRunner.gymObservable().leaderName.replace(/\d/g,'')">Modal title</h5>

           </div>
       </div>
       <div class="modal-body">
           <p data-bind="text: GymRunner.gymObservable().defeatMessage"></p>
           <!-- ko if: !BadgeCase.Badge[GymRunner.gymObservable().badgeReward].startsWith('Elite') -->
           <img src="" width="56px" data-bind="attr:{ src: 'assets/images/badges/' + BadgeCase.Badge[GymRunner.gymObservable().badgeReward] + '.png'}">
           <!-- /ko -->

       </div>
       <div data-bind="ifnot: GymRunner.gymObservable() instanceof Champion">
           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
           </div>
       </div>
       <div data-bind="if: GymRunner.gymObservable() instanceof Champion">
           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal"
                       onclick="$('#hallOfFameModal').modal('show')">
                   Next
               </button>
           </div>
       </div>

   </div>
</div>
</div>


<!-- Achievements Modal -->
<div class="modal  fade" id="achievementsModal" tabindex="-1" role="dialog"
aria-labelledby="AchievementsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Achievements</h5>
                <h5 style="display: inline" data-bind="text: 'Total Bonus: ' + AchievementHandler.achievementBonusPercent(), tooltip: { title: 'As you earn achievements, you gain up to 100% more money and xp from all sources.', trigger: 'hover', placement:'right' }"></h5>
            </div>

            <div class="modal-body table-responsive">
                <table class="table table-hover table-striped table-sm">
                    <tbody data-bind="template: { name: 'achievementListTemplate', foreach: AchievementHandler.getAchievementListWithIndex(10*AchievementHandler.navigateIndex())}">
                    </tbody>
                </table>
            </div>

            <div class="modal-footer justify-content-center">
                <button class="btn btn-secondary" onclick="AchievementHandler.navigateLeft()"
                        data-bind=" css: {disabled: AchievementHandler.navigateIndex() === 0}">
                    <img src="assets/images/leftarrow.png">
                </button>

                <div data-bind="text: AchievementHandler.navigateIndex()+1 + '/' + (AchievementHandler.getNumberOfTabs()+1)"></div>
                
                <button class="btn btn-secondary" onclick="AchievementHandler.navigateRight()"
                        data-bind=" css: {disabled: AchievementHandler.navigateIndex() ===  AchievementHandler.getNumberOfTabs()}">
                    <img src="assets/images/rightarrow.png">
                </button>
            </div>
        </div>
    </div>

    <script type="text/html" id="achievementListTemplate">
        <tr data-bind="css: { 'table-success': isCompleted() , 'table-danger': !isCompleted() }">
            <td style="text-align:left;vertical-align:middle;"><b><span data-bind="text: name">Name</span></b><br>
                <small><span data-bind="text: description">Description</span></small>
            </td>

            <td style="vertical-align:middle;"><span data-bind="text: getProgress()">1</span>/<span
                    data-bind="text: property.requiredValue">2</span>
            </td>
            <td style="vertical-align:middle;"><span data-bind="text: getProgressPercentage()"></span>%</td>

            <td style="vertical-align:middle;">+<span data-bind="text: getBonus()"></span>%</td>
        </tr>
    </script>
</div>

<!-- Oak Items Modal-->
<div class="modal fade noselect" id="oakItemsModal" tabindex="-1" role="dialog" aria-badgeledby="oakItemsModal">
    <div class="modal-dialog modal-sm" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5 data-bind="text: 'Oak Items Equipped: ' + App.game.oakItems.activeCount() + '/' + App.game.oakItems.maxActiveCount()">Oak Items</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>
           <div class="modal-body">
              <div class="row" data-bind="foreach: App.game.oakItems.itemList">
                  <div class="col p-0">
                      <button class="p-0 btn"
                          data-bind="css: {
                             'btn-primary': $data.isActive,
                             'btn-outline-secondary': !$data.isActive
                           }">
                          <img class="clickable" style="height: 32px;" src=""
                               data-bind="attr:{ src: 'assets/images/oakitems/' + OakItems.OakItem[$data.name] + '.png'},
                                css: {
                                  'oak-item-locked': !App.game.oakItems.isUnlocked($data.name)
                                },
                                event: {
                                  mouseover: function(){OakItemController.hover($data.name)},
                                  click: function(){OakItemController.click($data.name)},
                                }">
                        </button>
                  </div>
              </div>
          </div>
          <div class="modal-footer p-0">
              <table class="table table-bordered text-center m-0">
                <thead>
                  <th colspan="2">
                    <strong data-bind="text: GameConstants.humanifyString(OakItems.OakItem[OakItemController.inspectedItem])"></strong>
                  </th>
                </thead>
                <tbody>
                  <!-- ko if: App.game.oakItems.isUnlocked(OakItemController.inspectedItem) -->
                  <tr>
                    <td colspan="2" data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].description"></td>
                  </tr>
                  <tr>
                    <td colspan="2" class="p-0">
                      <div class="progress" style="height: 40px;">
                          <div class="progress-bar bg-primary" role="progressbar"
                              data-bind="attr:{ style: 'width:' + (App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() ? 100 : App.game.oakItems.itemList[OakItemController.inspectedItem].expPercentage) + '%' },
                                 css: {
                                   'bg-success': App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() && !App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel(),
                                   'bg-primary': !App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() || App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel(),
                                 }"
                              aria-valuemin="0" aria-valuemax="100">
                              <!-- ko if: !App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() && !App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() -->
                              <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].progressString" style="font-size: 15px;"></span>
                              <!-- /ko -->
                              <!-- ko if: App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() && !App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() -->
                              <span class="clickable" data-bind="html: 'Upgrade (' + App.game.oakItems.itemList[OakItemController.inspectedItem].calculateCost().amount.toLocaleString('en-US') + ' <img src=assets/images/currency/money.png height=18px/>)',
                                click: function(){ App.game.oakItems.itemList[OakItemController.inspectedItem].buy(); }" style="font-size: 15px;">
                                Upgrade
                              </span>
                              <!-- /ko -->
                              <!-- ko if: App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() -->
                              <span style="font-size: 15px;">MAX LEVEL!</span>
                              <!-- /ko -->
                          </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="table-dark" style="width: 50%">
                      Level: <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].level"></span>
                    </td>
                    <td class="table-dark" style="width: 50%">
                      <!-- ko if: OakItemController.inspectedItem === OakItems.OakItem.Magic_Ball -->
                      Bonus: <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].calculateBonusIfActive()"></span>%
                      <!-- /ko -->
                      <!-- ko ifnot: OakItemController.inspectedItem === OakItems.OakItem.Magic_Ball -->
                      Bonus: <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].calculateBonusIfActive()"></span>x
                      <!-- /ko -->
                    </td>
                  </tr>
                  <!-- /ko -->
                  <!-- ko ifnot: App.game.oakItems.isUnlocked(OakItemController.inspectedItem) -->
                  <tr>
                    <td colspan="2">Locked!<br/>Capture <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].unlockReq - App.game.party.caughtPokemon.length"></span> more unique Pokémon</td>
                  </tr>
                  <tr>

                  </tr>
                  <!-- /ko -->
                </tbody>
              </table>
          </div>
      </div>
  </div>
</div>


<!-- Statistics Modal-->
<div class="modal noselect fade" id="statisticsModal" tabindex="-1" role="dialog" aria-labelledby="statisticsModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Statistics</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <table class="table table-striped table-hover table-bordered table-sm m-0">
                    <thead>
                      <tr>
                        <th>Statistic</th>
                        <th>Amount</th>
                      </tr>
                    </thead>
                    <tbody data-bind="foreach: App.game.statistics.observables">
                      <tr>
                        <td class="text-left" data-bind="text: GameConstants.camelCaseToString($data)">-</td>
                        <td class="text-left tight"><code data-bind="text:App.game.statistics[$data]().toLocaleString('en-US')">-</code></td>
                      </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Log Book Modal-->
<div class="modal noselect fade" id="logBookModal" tabindex="-1" role="dialog" aria-labelledby="logBookModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Log Book</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <table class="table table-striped table-hover table-bordered table-sm m-0">
                    <thead>
                      <tr>
                        <th>Type</th>
                        <th>Message</th>
                        <th>Date</th>
                      </tr>
                    </thead>
                    <tbody data-bind="foreach: App.game.logbook.logs">
                      <tr>
                        <td class="tight" data-bind="html:type.label, class: 'table-' + type.display"></td>
                        <td class="text-left" data-bind="text:description">-</td>
                        <td class="text-left"><code data-bind="text:new Date(date).toLocaleString()">-</code></td>
                      </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Settings Modal-->
<div class="modal noselect fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Settings</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <table class="table table-striped table-hover m-0">
                    <thead>
                      <tr>
                        <th>Setting</th>
                        <th>Option</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('theme')}"></tr>
                      <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('breedingDisplay')}"></tr>
                      <tr data-bind="template: { name: 'BooleanSettingTemplate', data: Settings.getSetting('showCurrencyGainedAnimation')}"></tr>
                      <tr data-bind="template: { name: 'BooleanSettingTemplate', data: Settings.getSetting('disableBerryNotifications')}"></tr>
                      <tr data-bind="template: { name: 'BooleanSettingTemplate', data: Settings.getSetting('disableAutoDownloadBackupSaveOnUpdate')}"></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<script type="text/html" id="MultipleChoiceSettingTemplate">
    <td data-bind="text: $data.displayName">setting name</td>
    <td>
        <select class="form-control" onchange="Settings.setSettingByName(this.name, this.value)" data-bind="foreach: $data.options, attr: {name}">
            <option data-bind="text: $data.text, value: $data.value, attr:{ selected: $parent.observableValue() == $data.value}"></option>
        </select>
    </td>
</script>

<script type="text/html" id="BooleanSettingTemplate">
    <td data-bind="text: $data.displayName">setting name</td>
    <td>
      <input class="clickable" type="checkbox"
           data-bind="checked: Settings.getSetting($data.name).observableValue(), attr: {name}"
           onchange="Settings.setSettingByName(this.name, this.checked)"/>
    </td>
</script>


<!-- Changelog Modal -->
<div class="modal fade noselect" id="changelogModal" tabindex="-1" role="dialog" aria-badgeledby="changelogModal">
    <div class="modal-dialog modal-lg" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5>Changelog</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>

           <div class="modal-body p-0">
               <table class="table table-striped table-hover table-bordered table-sm">
                   <thead>
                     <tr>
                       <th>Type</th>
                       <th>Message</th>
                     </tr>
                   </thead>
                   <tbody data-bind="foreach: changelogItems">
                     <tr data-bind="css: { 'table-dark': type.label == 'UPDATE' }">
                       <td class="tight" data-bind="html: type.label, class: 'table-' + type.display"></td>
                       <td class="text-left" data-bind="html: description">-</td>
                     </tr>
                   </tbody>
               </table>
               <br/>
           </div>

           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
           </div>
       </div>
    </div>
</div>


<!-- Changelog Modal -->
<div class="modal fade noselect" id="eventsModal" tabindex="-1" role="dialog" aria-badgeledby="eventsModal">
    <div class="modal-dialog modal-lg" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5>Events</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>

           <div class="modal-body p-0">
               <table class="table table-striped table-hover table-bordered table-sm m-0">
                   <thead>
                     <tr>
                       <th>Event</th>
                       <th>Description</th>
                       <th>Start Time</th>
                       <th>End Time</th>
                     </tr>
                   </thead>
                   <tbody data-bind="foreach: SpecialEvents.events">
                     <!-- ko if: Date.now() < endTime -->
                     <tr>
                       <td data-bind="text: title"></td>
                       <td class="text-left" data-bind="text: description"></td>
                       <td class="text-left"><code data-bind="text: startTime.toLocaleString()">-</code></td>
                       <td class="text-left"><code data-bind="text: endTime.toLocaleString()">-</code></td>
                     </tr>
                     <!-- /ko -->
                   </tbody>
               </table>
           </div>

           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
           </div>
       </div>
    </div>
</div>


<!-- Start Sequence Modal-->
<div class="modal" id="startSequenceModal" tabindex="-1" role="dialog"
aria-labelledby="startSequenceModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="startSequenceModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p>Hello, there! Glad to meet you! Welcome to the world of Pokémon!<br>
               My name is Oak. People affectionately refer to me as the Pokémon Professor.<br>
               This world… …is inhabited far and wide by creatures called Pokémon!<br>
               For some people, Pokémon are pets. Other use them for battling.<br>
               As for myself… I study Pokémon as a profession.<br>
               However, your very own Pokémon legend is about to unfold!<br>
               A world of dreams and adventures with Pokémon awaits! Let's go!
           </p>
       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Next</button>
       </div>
   </div>
</div>
</div>


<!-- Pick Starter Modal-->
<div class="modal" id="pickStarterModal" tabindex="-1" role="dialog"
aria-labelledby="pickStarterModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="pickStarterModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p id="pickStarterModalText">Oh No! We got ambushed by these pokémon!<br>
               I can only hold off two! Pick the one you want to fight!</p>
           <div class="row justify-content-center">
               <div class="col-lg-8">
                   <div class="row">

                       <div class="col">
                           <input class="image-starter" type="image"
                                  src="assets/images/pokemon/1.png"
                                  onclick="StartSequenceRunner.pickStarter(GameConstants.Starter.Bulbasaur)">
                       </div>
                       <div class="col">
                           <input class="image-starter" type="image"
                                  src="assets/images/pokemon/4.png"
                                  onclick="StartSequenceRunner.pickStarter(GameConstants.Starter.Charmander)">
                       </div>
                       <div class="col">
                           <input class="image-starter" type="image"
                                  src="assets/images/pokemon/7.png"
                                  onclick="StartSequenceRunner.pickStarter(GameConstants.Starter.Squirtle)">
                       </div>
                   </div>
               </div>
           </div>
           <p>You can click on it to inflict damage</p>
       </div>
   </div>
</div>
</div>

<!-- Starter Caught Modal-->
<div class="modal" id="starterCaughtModal" tabindex="-1" role="dialog"
aria-labelledby="starterCaughtModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="starterCaughtModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p>
               Hm! Excellent! You have caught your first pokémon!<br>
               This is where your journey begins. <br>
               You can progress to the next route after you have defeated 10 pokémon.<br>
               To help you on your journey, I will give you these <b>Key items</b>!<br>
               You can view all your <b>Key items</b> in the start menu.<br>
           </p>
           <div class="row justify-content-center">
               <div class="col-sm-3">
                   <img
                           title="A television set that is tuned to a program with useful tips for novice TRAINERS"
                           class="key-item"
                           src="assets/images/keyitems/Teachy_tv.png"/>
                   <br>
                   <p>Teachy tv</p>
               </div>
               <div class="col-sm-3">
                   <img
                           title="A case for holding money. It can hold up to 1,000,000 coins"
                           class="key-item"
                           src="assets/images/keyitems/Coin_case.png"/>
                   <br>
                   <p>Coin case</p>
               </div>
               <div class="col-sm-3">
                   <img
                           title="A tiny bag that can hold up to 4 different types of PokéBalls"
                           class="key-item"
                           src="assets/images/keyitems/Pokeball_bag.png"/>
                   <br>
                   <p>PokéBall bag</p>
               </div>

           </div>

       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Next</button>
       </div>
   </div>
</div>
</div>


<!-- Hall of Fame Modal -->
<div class="modal fade" data-keyboard="false" data-backdrop="static" id="hallOfFameModal" tabindex="-1" role="dialog"
aria-labelledby="hallOfFameModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="hallOfFameModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p>
               So, you won! Congratulations!<br/>
               You are the new Pokémon League champion!<br/>
               You have grown up so much since you first left with <span data-bind="text: GameConstants.Starter[player.starter]">starter</span>!<br/>
               <br/>
               There are many more regions to explore,<br/>
               In order to move on you will need to capture all available Pokémon from the current region!
           </p>
       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Log Book Modal-->
<div class="modal noselect fade" id="nextRegionModal" tabindex="-1" role="dialog" aria-labelledby="nextRegionModal">
    <div class="modal-dialog modal-dialog-centered modal-md" role="document">
        <div class="modal-content">
           <div class="modal-header">
               <h5 class="modal-title" data-bind="text: `Travel to ${GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])}`">Travel to next region</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>
           <div class="modal-body">
               <p>
                   <strong>Congratulations on completing the <span data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion()])"></span> Pokédex!</strong><br/>
                   You can now travel on to <span data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])"></span>!<br/>
                   <br/>
                   <strong>There are a few things you should know before you depart:</strong><br/>
                   When Pokémon are in a Region they're not native to, they will only retain 20% of their total attack.<br/>
                   You will also have to progress to the Dock in <span data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])"></span> before you are able to travel between regions again.
               </p>
               <button class="btn btn-success btn-block" onclick="MapHelper.travelToNextRegion()" data-dismiss="modal">Lets go!</button>
           </div>
       </div>
    </div>
</div>


<!-- Shards Modal -->
<div class="modal fade noselect" id="shardModal" tabindex="-1" role="dialog" aria-badgeledby="shardModal">
    <div class="modal-dialog modal-lg" role="document">
       <div class="modal-content">
            <div class="modal-header">
                <h5>Shards</h5>
                <button type="button" class="btn btn-info"
                        style="position: absolute; right: 0px; top: 0px; width: auto; height: 63px; padding: 10px;"
                        data-bind="tooltip: { title: 'Use shards to upgrade the type effectiveness of your Pokémon. When you defeat a Pokémon, you get shards based on its type.', trigger: 'hover', placement:'left' }">
                    ?
                </button>

            </div>
            <div class="modal-body p-0">
                <table class='table table-sm table-hover m-0'>
                    <tbody>
                        <!-- ko foreach: Array(Shards.nTypes) -->
                            <tr>
                                <th colspan="4" class="text-left table-dark text-light">
                                    <h3>
                                        <knockout data-bind="text: PokemonType[$index()]"></knockout>
                                        <div class="float-right">
                                            <img data-bind='attr: { src: "assets/images/shards/" + $index() + ".png" }'/>
                                            <knockout data-bind="text: App.game.shards.shardWallet[$index()].toLocaleString('en-US')"></knockout>
                                        </div>
                                    </h3>
                                </th>
                            </tr>
                            <!-- ko foreach: Array(Shards.nEffects) -->
                                <tr>
                                    <td data-bind='text: GameConstants.TypeEffectiveness[$index()]'></td>
                                    <td width='50%'>
                                        <div class="progress"
                                            data-bind="style: { 'background-color': '#' + TypeHelper.typeColorsLocked[$parentContext.$index()] }">
                                            <div class='progress-bar' role="progressbar"
                                                data-bind="style: { width: (App.game.shards.getShardUpgrade($parentContext.$index(), $index()) * 10) + '%',
                                                                        'background-color': '#' + TypeHelper.typeColors[$parentContext.$index()] }"
                                                aria-valuemin="0" aria-valuemax="100">
                                            </div>
                                            <div class='cell-container' data-bind='foreach: new Array(9)'>
                                                <div class='progress-cell' style='width: 10%'></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td data-bind='text: (GameConstants.TypeEffectivenessValue[GameConstants.TypeEffectiveness[$index()]] 
                                        + (App.game.shards.getShardUpgrade($parentContext.$index(), $index()) * Shards.SHARD_UPGRADE_STEP)).toFixed(1) + "x"'></td>
                                    <td>
                                        <button class='btn btn-block btn-primary'
                                                data-bind='click: function(){App.game.shards.buyShardUpgrade($parentContext.$index(), $index())},
                                                    css: {disabled: !App.game.shards.canBuyShardUpgrade($parentContext.$index(), $index())},
                                                    text: (App.game.shards.hasMaxUpgrade($parentContext.$index(), $index()) ?  "MAXED" : "Buy (" + App.game.shards.getShardUpgradeCost($parentContext.$index(), $index()) + ")")'>
                                        </button>
                                    </td>
                                </tr>
                            <!-- /ko -->
                        <!-- /ko -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Breeding Modal-->
<div class="modal fade" id="breedingModal" tabindex="-1" role="dialog"
aria-labelledby="breedingModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
            <h5 class="modal-title" id="breedingModalLabel">Day Care</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
       </div>
       <div class="modal-body">
           <img src="assets/images/oak.png">
           <p>
               This is the Pokémon Day Care Center.<br/>
               You can trade your level 100 pokémon for an egg of the same pokémon.<br/>
               Hatched pokémon will gain a <knockout data-bind="text: GameConstants.BREEDING_ATTACK_BONUS"></knockout>% bonus of their base attack and have a higher chance of becoming shiny!
           </p>
           <div data-bind="if: App.game.breeding.hasFreeEggSlot()">
               <!-- ko if: Object.keys(GameConstants.EggItemType).filter(e=>isNaN(e)).filter(x=>player._itemList[x]()).length || Object.keys(GameConstants.FossilToPokemon).filter(f => player.mineInventory.find(i => i.name == f && i.amount())).length -->
               <p>
                   Pick an egg/fossil below to breed:
               </p>
               <div class="row">
                    <!-- ko foreach: Object.keys(GameConstants.EggItemType).filter(e=>isNaN(e)).filter(x=>player._itemList[x]()) -->
                        <button class="eggSlot col-sm-4 col-md-3 col-lg-2 pokedexEntry text-nowrap btn"
                            data-bind="click: function() { ItemList[$data].use(); if (!App.game.breeding.hasFreeEggSlot()) {$('#breedingModal').modal('hide'); } }">
                            <span style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: GameConstants.humanifyString($data)">egg</span>
                            <img src="" width="80px" data-bind="attr:{ src: `assets/images/breeding/${$data}.png` }">
                            <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px"
                            data-bind="text: 'Amount: ' + player._itemList[$data]()">amount</span>
                        </button>
                    <!-- /ko -->
                    <!-- ko foreach: Object.keys(GameConstants.FossilToPokemon).map(f => player.mineInventory.find(i => i.name == f)).filter(f => f ? f.amount() : false) -->
                       <button class="eggSlot col-sm-4 col-md-3 col-lg-2 pokedexEntry text-nowrap btn"
                       data-bind="click: function() { Underground.sellMineItem($data.id); if (!App.game.breeding.hasFreeEggSlot()) {$('#breedingModal').modal('hide'); } }">
                             <span style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: GameConstants.humanifyString($data.name)">fossil</span>
                             <img src="" width="60%" data-bind="attr:{ src: `assets/images/breeding/${$data.name}.png` }">
                             <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px"
                             data-bind="text: 'Amount: ' + $data.amount()">amount</span>
                       </button>
                    <!-- /ko -->
               </div>
               <!-- /ko -->
               <!-- Check if the player has any level 100 Pokemon or if they have any eggs -->
               <p class="text-danger" data-bind="visible: !App.game.party.hasMaxLevelPokemon()">
                   Unfortunately, you don't have any pokémon of level 100
               </p>
               <!-- ko if: App.game.party.hasMaxLevelPokemon() -->
                 <p>
                     Pick a pokémon below to breed:
                 </p>
                 <div class="row" data-bind="foreach: PartyController.getMaxLevelPokemonList()">
                    <button class="col-sm-4 col-md-3 col-lg-2 pokedexEntry text-nowrap btn"
                    data-bind="style:{background: PokedexHelper.getBackgroundColors($data.name)},
                      click: function() { App.game.breeding.gainPokemonEgg($data);if (!App.game.breeding.hasFreeEggSlot()) {$('#breedingModal').modal('hide');}}">
                        <span style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: $data.name">name</span>
                        <div data-bind="if: PokedexHelper.pokemonSeen($data.id)">
                            <div data-bind="visible: App.game.party.alreadyCaughtPokemon($data.id, true)" style="position: absolute;right: 0px;top: 0px;">✨</div>
                            <img src="" width="80px" data-bind="attr:{ src: PokedexHelper.getImage($data.id)}">
                            <span class="attack" style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px"
                              data-bind="text: $data.attack">attack</span>
                        </div>
                    </button>
                 </div>
               <!-- /ko -->
           </div>
           <p class="text-danger" data-bind="visible: !App.game.breeding.hasFreeEggSlot()">
               Unfortunately, you don't have any free eggslots
           </p>
       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Underground Modal -->
<div aria-labelledby="myModalLabel" class="modal fade noselect" id="mineModal" role="dialog"
style="cursor:default" tabindex="-1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header p-0">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item"><a data-toggle='tab' class='nav-link active' href="#dig">Dig</a></li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#treasures">Treasures</a>
                    </li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#upgrades">Upgrades</a>
                    </li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#dailyDeals">Daily
                        deals</a></li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#help">Help</a></li>
                    <btn class="btn btn-primary">
                        <span id="diamondCounter" data-bind='text: App.game.wallet.currencies[GameConstants.Currency.diamond]'>x</span>
                        <img src='assets/images/underground/diamond.svg' width="20px'">
                    </btn>
                </ul>
            </div>
            
            <div class="modal-body tab-content p-0">
                <div id="dig" class="tab-pane fade in active show pl-3 pr-3">
                    <div class="row" data-bind="foreach: ['SmallRestore','MediumRestore','LargeRestore']">
                        <button class="col-4 btn btn-secondary" data-bind="
                                                        click: function(){  ItemList[$data].use();},
                                                        css: { disabled: player._itemList[$data]() <= 0}"
                        >
                            <span data-bind="text: '(' + player._itemList[$data]() + ')'">(?)</span>
                            <img class="restore-item" data-bind="attr: { src: 'assets/images/items/' + $data + '.png'}">
                            <span data-bind="text: ' +' + Underground.calculateItemEffect(GameConstants.EnergyRestoreSize[$data])">&nbsp;+? energy</span>
                        </button>
                    </div>
                    <div class='row' style="text-align:center;">
                        <div class='progress'>
                            <div id='mineEnergyBar' class='progress-bar bg-warning' role='progressbar'
                                aria-valuemin='0' aria-valuemax='100'
                                data-bind="style: { width: Math.floor(Underground.energy/Underground.getMaxEnergy()*100) + '%' }">
                                <span data-bind="text: 'Energy: ' + Math.floor(Underground.energy) + ' / ' + Underground.getMaxEnergy() + (Math.floor(Underground.energy) < Underground.getMaxEnergy() ? ' (' + Underground.energyTick() + 's)' : '')"></span>
                            </div>
                        </div>
                    </div>
                    <div id="mineBody" style="margin:auto">
                    </div>
                    <div class='row'>
                        <button class='col-12 col-md-4 btn btn-primary' onClick='Mine.toolSelected(Mine.Tool.Hammer)'>Hammer (<knockout data-bind="text: Underground.HAMMER_ENERGY"></knockout> energy)</button>
                        <button class='col-12 col-md-4 btn btn-info' onClick='Mine.toolSelected(Mine.Tool.Chisel)'>Chisel (<knockout data-bind="text: Underground.CHISEL_ENERGY"></knockout> energy)</button>
                        <button class='col-12 col-md-4 btn' data-bind="text: Mine.itemsFound() + ' / ' + Mine.itemsBuried + ' items found'"></button>
                      </div>
                </div>
                <div id="treasures" class="tab-pane fade">
                    <div data-bind="if: player.hasMineItems()">
                        <table class="table table-sm table-hover table-striped m-0">
                            <thead>
                                <tr>
                                    <th colspan="2">Item</th>
                                    <th>Value</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody data-bind="template: { name: 'treasureListTemplate', foreach: player.mineInventory}">
                            </tbody>
                        </table>
                    </div>
                    <div data-bind="ifnot:player.hasMineItems()">
                        You don't have any treasures yet...
                    </div>
                </div>
                <div id="upgrades" class="tab-pane fade">
                    <table class="table table-sm table-hover table-striped m-0">
                        <thead>
                            <tr>
                            <th>Upgrade</th>
                            <th>Amount</th>
                            <th>Cost</th>
                            <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getMaxEnergy(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Energy_Max)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getMaxItems(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Items_Max)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getEnergyGain(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Energy_Gain)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getEnergyRegenTime(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Energy_Regen_Time)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                            'data': {'totalBonus': Underground.getDailyDealsMax(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Daily_Deals_Max)}}"></tr>
                        </tbody>
                    </table>
                </div>
                <div id="help" class="tab-pane fade">
                    <h4>In the underground you can mine for hidden treasures.</h4>
                    <h4>Select the Hammer or the Chisel and click on the wall.</h4>
                    <h4>Sell your treasures for shards or diamonds!</h4>
                    <h4>You can use your diamonds to buy all kinds of upgrades that will help you explore the underground even further!</h4>
                    <h4>In the Daily deals tab you can trade your items.</h4>
                </div>
                <div id="dailyDeals" class="tab-pane fade">
                    <div class="table-responsive" id="dailyDealsBody">
                        <table class="table table-sm table-hover table-striped m-0 text-left">
                            <thead>
                                <tr>
                                    <th class="text-center">Inv</th>
                                    <th></th>
                                    <th>Item</th>
                                    <th></th>
                                    <th></th>
                                    <th>Item</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody data-bind='foreach: DailyDeal.list'>
                                <tr>
                                    <td class='vertical-middle text-center' data-bind='text: player.getUndergroundItemAmount(item1.id)'></td>
                                    <td class='vertical-middle'>
                                        <img class='mineInventoryItem' data-bind='attr: {src: "assets/images/underground/"+item1.id+".png"}'>
                                    </td>
                                    <td class='vertical-middle' data-bind='text: amount1 + " × " + item1.name'></td>
                                    <td class='vertical-middle'>→</td>
                                    <td class='vertical-middle'>
                                        <img class='mineInventoryItem' data-bind='attr: {src: "assets/images/underground/"+item2.id+".png"}'>
                                    </td>
                                    <td class='vertical-middle' data-bind='text: amount2 + " × " + item2.name'></td>
                                    <td class='vertical-middle'>
                                        <button class='btn btn-success btn-block' data-bind='click: function(){DailyDeal.use($index())}, css: { disabled: !DailyDeal.canUse($index()) }'>
                                            Trade
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>

    <script type="text/html" id="undergroundUpgradeTemplate">
            <td class='vertical-middle' data-bind='text: upgrade.displayName + ": " + totalBonus'></td>
            <td class='vertical-middle'
                data-bind='text: upgrade.isMaxLevel() ? "" : "(" + (upgrade.increasing ? "+" : "-") + upgrade.upgradeBonus() + ")"'></td>
            <td class='vertical-middle'
                data-bind='text: upgrade.isMaxLevel() ? "" : upgrade.calculateCost().amount + " diamonds"'></td>
            <td class='vertical-middle'>
                <button class='btn btn-success btn-block'
                        data-bind='css: { disabled: !upgrade.canBuy() },
                                text: upgrade.isMaxLevel() ? "Max" : "Upgrade",
                                click: function(){upgrade.buy(); DailyDeal.generateDeals(Underground.getDailyDealsMax(), new Date());}'>
                </button>
            </td>
    </script>

    <script type="text/html" id="treasureListTemplate">
        <tr data-bind='if: amount() > 0'>
            <td class='vertical-middle'>
                <img class='mineInventoryItem' data-bind='attr:{ src: "assets/images/underground/"+id+".png" }'>
                <span data-bind='text: "("+$data.amount()+")"'></span>
            </td>
            <td class='vertical-middle' data-bind='text: name'></td>
            <!-- ko if: valueType == "Mine Egg" -->
            <td></td>
            <!-- /ko -->
            <!-- ko ifnot: valueType == "Mine Egg" -->
            <td class='vertical-middle' data-bind='text: value + " " + UndergroundItem.getFullResourceName(valueType, value)'></td>
            <!-- /ko -->
            <td class='vertical-middle'>
                <button class='btn btn-success btn-block'
                        data-bind='click: function(){ Underground.sellMineItem(id) },
                                css: { disabled: amount() <= 0 || (valueType === "Mine Egg" && !App.game.breeding.hasFreeEggSlot()) },
                                text: valueType === "Mine Egg" ? "Breed" : "Sell"'>
                </button>
            </td>
        </tr>
    </script>
</div>


<!-- Pokedex Modal-->
<div class="modal noselect" id="pokedexModal" tabindex="-1" role="dialog"
aria-labelledby="pokedexModalLabel">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <h4 style="margin-bottom: 0">Pokédex</h4>
           <button style="float:right;" class="btn btn-secondary" type="button" data-toggle="collapse"
                   data-target="#pokedex-collapse" aria-expanded="false" aria-controls="pokedex-collapse">
               Filters
           </button>
       </div>
       <div class="modal-body">

           <div class="collapse" id="pokedex-collapse">
               <div class="container-fluid" style="border-bottom: 1px solid #eceeef">
                   <div class="row justify-content-center">

                       <!--Name-->
                       <div class="form-group row col-sm-10 col-lg-6">
                           <label class="col-2 col-form-label">Name</label>
                           <div class="col-10">
                               <input id="nameFilter" class="form-control" placeholder="Bulbasaur" value=""
                                      oninput="PokedexHelper.updateList()">
                           </div>
                       </div>

                       <!--Types-->
                       <div class="form-group row col-sm-10 col-lg-6">
                           <label class="col-2 col-form-label" for="pokedex-filter-type1">Type</label>
                           <div class="col-5">
                               <select id="pokedex-filter-type1" class="custom-select"
                                       oninput="PokedexHelper.updateList()" style="margin-right: 8px">
                                   <option value="-1" selected>All</option>
                               </select>
                           </div>
                           <label class="sr-only" for="pokedex-filter-type2">Type</label>
                           <div class="col-5">
                               <select id="pokedex-filter-type2" class="custom-select"
                                       oninput="PokedexHelper.updateList()">
                                   <option value="-1" selected>All</option>
                               </select>
                           </div>
                       </div>

                   </div>

                   <div class="form-group row justify-content-center">
                       <!--Uncaught-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-uncaught"
                                      value="false" onclick="PokedexHelper.updateList()"> Uncaught
                           </label>
                       </div>
                       <!--Caught-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-caught"
                                      value="false" onclick="PokedexHelper.updateList()"> Caught
                           </label>
                       </div>
                       <!--Shiny-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-shiny"
                                      value="false" onclick="PokedexHelper.updateList()"> Shiny
                           </label>
                       </div>
                       <!--Not Shiny-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-not-shiny"
                                      value="false" onclick="PokedexHelper.updateList()"> Not Shiny
                           </label>
                       </div>

                   </div>

                   <div class="row justify-content-center">
                      <h4 data-bind="text: `Showing ${PokedexHelper.filteredList().length} Pokémon`"></h4>
                   </div>
               </div>

           </div>
           <div>
               <ul class="row justify-content-center" data-bind="foreach: PokedexHelper.filteredList()"
                   style="max-width: 100%; padding:0; margin:0;">
                   <li class="col-sm-4 col-md-3 col-lg-2 pokedexEntry"
                       data-bind="style:{background: PokedexHelper.getBackgroundColors($data.name)}">
                       <!-- Pokedex ID -->
                       <span class="id" style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: $data.id">number</span>
                       <!-- Pokedex name caught status -->
                       <div>
                           <img src="" width="80px" data-bind="css: { 'pokemon-not-seen': !PokedexHelper.pokemonSeen($data.id)() }, attr:{ src: PokedexHelper.getImage($data.id)}">
                           <!-- ko if: PokedexHelper.pokemonSeen($data.id) -->
                           <div data-bind="visible: App.game.party.alreadyCaughtPokemonByName(name)" style="position: absolute;right: 2px;top: -15px;">
                             <img width="18px" src="" data-bind="attr: { src: `assets/images/pokeball/Pokeball${App.game.party.alreadyCaughtPokemon($data.id, true) ? '-shiny' : ''}-small.png`}"/>
                           </div>
                           <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px" data-bind="text: $data.name">name</span>
                           <a class="overlay" href="#pokemonStatisticsModal" data-toggle="modal" data-bind="click: ()=>{App.game.statistics.selectedPokemonID($data.id)}, tooltip: { html: true, title: `<u>Information:</u><br/>Base Attack: <strong>${$data.attack}</strong><br/>Catch Rate: <strong>${PokemonFactory.catchRateHelper($data.catchRate, true)}%</strong><br/>Hatch Steps: <strong>${App.game.breeding.getSteps($data.eggCycles).toLocaleString('en-US')}</strong>`, trigger: 'hover', placement:'bottom' }"></a>
                           <!-- /ko -->
                       </div>
                   </li>
               </ul>
           </div>
       </div>

       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Statistics Modal-->
<div class="modal noselect fade" id="pokemonStatisticsModal" tabindex="-1" role="dialog" aria-labelledby="pokemonStatisticsModal">
    <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
        <div class="modal-content" data-bind="with: App.game.statistics.selectedPokemonID()">
            <div class="modal-header bg-dark text-light" style='justify-content: space-around;'>
                <h5 class="modal-title text-muted" data-bind="text: `#${pokemonMap[$data].id.toString().padStart(3,0)}&nbsp;&nbsp;`"></h5>
                <h5 class="modal-title text-light" data-bind="text: pokemonMap[$data].name">Pokemon Statistics</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <img data-bind="attr:{ src: 'assets/images/' + (App.game.party.alreadyCaughtPokemon($data, true) ? 'shiny' : '') + 'pokemon/' + $data + '.png' }" src=""/>
                <table class="table table-striped table-hover table-bordered table-sm m-0">
                  <thead>
                    <tr class="text-light">
                      <th class="text-left bg-dark">Type</th>
                      <th class="text-left bg-dark">Amount</th>
                    </tr>
                  </thead>
                  <tbody">
                    <tr>
                      <td class="text-left">Base Attack</td>
                      <td class="text-left tight"><code data-bind="text: pokemonMap[$data].attack.toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Current Attack</td>
                      <td class="text-left tight"><code data-bind="text: (App.game.party.getPokemon($data)?.attack || 0).toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Catch Rate</td>
                      <td class="text-left tight"><code data-bind="text: PokemonFactory.catchRateHelper(pokemonMap[$data].catchRate, true) + '%'">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Hatch Steps</td>
                      <td class="text-left tight"><code data-bind="text: App.game.breeding.getSteps(pokemonMap[$data].eggCycles).toLocaleString('en-US')">-</code></td>
                    </tr>
                  </tbody>
                  <thead>
                    <tr class="text-light">
                      <th class="text-left bg-dark">Statistic</th>
                      <th class="text-left bg-dark">Amount</th>
                    </tr>
                  </thead>
                  <tbody">
                    <tr>
                      <td class="text-left">Hatched</td>
                      <td class="text-left tight"><code data-bind="text: ((App.game.party.getPokemon($data)?.attackBonus / 25) || 0).toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Encountered</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonEncountered[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Defeated</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonDefeated[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Captured</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonCaptured[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Encountered</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonEncountered[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Defeated</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonDefeated[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Captured</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonCaptured[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                  </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Badge Case Modal-->
<div class="modal fade noselect" id="badgeCaseModal" tabindex="-1" role="dialog"
aria-labelledby="badgeCaseModalLabel">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <h5 class="modal-title">Badge Case</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
           </button>
       </div>
       <div class="modal-body">
           <div class="row no-gutters justify-content-center"
                data-bind="foreach: BadgeCaseController.getDisplayableBadges()">
               <div class="col-3 badgeEntry">
                   <img src="" width="60px"
                        data-bind="attr:{ src: 'assets/images/badges/'+ $data +'.png'},
                        css: { 'badge-not-acquired': !App.game.badgeCase.hasBadge(BadgeCase.Badge[$data])}">

                   <p style="bottom: 0;"
                      data-bind="text: $data">name</p>

               </div>
           </div>
       </div>

       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Save Modal-->
<div class="modal fade noselect" id="saveModal" tabindex="-1" role="dialog"
     aria-labelledby="saveModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body p-0">
                <div class="tabbable">
                    <ul class="nav nav-tabs nav-fill">
                        <li class="nav-item"><a class="nav-link active" href="#saveTab" data-toggle="tab">Save</a></li>
                        <li class="nav-item"><a class="nav-link" href="#saveConvert" data-toggle="tab">Converter</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="saveTab" class="tab-pane fade in active show">
                            <div class="page-item m-0 pt-3 pb-3">
                                <form class="form-inline justify-content-center">
                                    <input placeholder="Enter code..." id="redeemable-code-input" type="text">
                                    <button class="btn btn-info" name="name" value="value" type="submit" onclick="RedeemableCodeController.enterCode(); return false;">Claim!</button>
                                </form>
                                <hr>

                                <button class="btn btn-info" onClick=Save.download()>Download Save</button>
                                <hr>

                                <input type="file" id="input" accept=".txt" style="display:none;"
                                       onchange=Save.loadFromFile(this.files[0])>
                                <label for="input" class="btn btn-info">Import Save</label>
                                <hr>
                                <h3 style="color:red; margin-top: 20px;">You do not get any rewards for resetting your
                                    savefile</h3>
                                <button class="btn btn-danger" onClick="Save.reset()">Reset All</button>
                            </div>
                        </div>

                        <div id="saveConvert" class="tab-pane fade">
                            <div class="page-item m-0 pt-3 pb-3">
                                <p>You can paste your old Pokéclicker savefile here, to keep shinies:</p>
                                <textarea id="convertTextArea" class="saveTextArea"></textarea>
                                <button style="float: right;" class="btn btn-success" onclick="Save.convert()">
                                    Convert
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Quests Modal-->
<div class="modal noselect fade" id="QuestModal" tabindex="-1" role="dialog" aria-labelledby="QuestModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">

                <div class="col-3">
                <h5>
                    <span class='' data-bind='text: "Quests (" + player.currentQuests().length + "/" + QuestHelper.questSlots()() + ")"'>
                    </span>
                </h5>
                </div>
                <div class='col-6'>
                    <div data-bind='text: "Lvl. "+player.questLevel'></div>
                    <div class="progress" style='height: 5px'>
                        <div class="progress-bar bg-info" role="progressbar"
                             data-bind="attr:{ style: 'width:' + player.percentToNextQuestLevel() + '%' }"
                             aria-valuemin="0" aria-valuemax="100">
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <span data-bind="template: { name: 'currencyTemplate', data: {'amount': App.game.wallet.currencies[GameConstants.Currency.questPoint], 'currency': GameConstants.Currency.questPoint}}"></span>
                </div>

            </div>
            <div class="modal-body p-0">
                <table class='table table-hover m-0'>
                    <thead>
                    <tr>
                        <td><h5>Description</h5></td>
                        <td><h5>Reward</h5></td>
                        <td><h5>Status</h5></td>
                    </tr>
                    </thead>
                    <tbody data-bind="foreach: QuestHelper.questList" >
                    <tr>
                        <td class="align-middle" style="text-align:left" data-bind='text: description'></td>
                        <td class="align-middle" style="text-align:left">
                            <span data-bind="template: { name: 'currencyTemplate', data: {'amount':  pointsReward, 'currency': GameConstants.Currency.questPoint}}"></span>
                        </td>
                        <td class="align-middle">
                            <button class='btn btn-primary btn-sm btn-block'
                                data-bind='visible: QuestHelper.canStartNewQuest() && !QuestHelper.onQuest($data.index)() && !player.completedQuestList[index](),
                                click: function(){
                                    QuestHelper.beginQuest($data.index);
                                    if (!QuestHelper.canStartNewQuest()) {$("#QuestModal").modal("hide");}
                                }'>
                                Start
                            </button>
                            <button class='btn btn-success btn-sm btn-block' data-bind='visible: QuestHelper.onQuest($data.index)() && $data.isCompleted(),
                                                                click: $data.endQuest'>
                                Claim
                            </button>
                            <span data-bind='visible: $data.inProgress(), text: Math.floor(progress()*100) + "%"'></span>
                            <button class='btn btn-success btn-sm btn-block' disabled data-bind='visible: player.completedQuestList[index]()'>Completed</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <div id='refreshQuests'>
                    <button class="btn btn-primary" onclick='QuestHelper.refreshQuests(false, true)'
                            data-bind='text: "Refresh",
                                       enable: QuestHelper.canAffordRefresh()'></button>
                    <span data-bind="template: { name: 'amountTemplate', data: QuestHelper.getRefreshCost()}"></span>
                    <span class='' data-bind='text: "(Daily refresh in " + GameHelper.formattedLetterTimeUntilTomorrow() + ")"'>
                    </span>
                </div>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Farm Modal-->
<div class="modal fade noselect" id="farmModal" tabindex="-1" role="dialog"
     aria-labelledby="farmModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Farm</h4>
                <!-- ko ifnot: App.game.farming.allPlotsUnlocked() -->
                <button class="btn btn-success" onclick="App.game.farming.unlockPlot()"
                        data-bind="css: { disabled: !App.game.farming.canBuyPlot()}">
                    <span>Unlock new plot </span>
                    <span data-bind="template: { name: 'amountTemplate', data: App.game.farming.calculatePlotPrice()}"></span>
                </button>
                <!-- /ko -->
            </div>
            <div class="modal-body">
                <div id="farmView" class="justify-content-center no-select row">
                    <div class="col-12 col-lg-4">
                        <div class="col-sm-12">
                            <span data-bind="template: { name: 'currencyTemplate', data: {'amount': App.game.wallet.currencies[GameConstants.Currency.farmPoint], 'currency': GameConstants.Currency.farmPoint}}"></span>
                        </div>
                        <ul id="seedList" data-bind="foreach: App.game.farming.berryList" class="list-group"
                            style="margin-bottom: 5px;">
                            <li class="list-group-item list-group-item-action seed-list-item"
                                data-bind="click: function() {FarmController.selectedBerry = $index()}">
                                <img src="" width="24px"
                                     data-bind="attr:{ src: 'assets/images/items/' + BerryType[$index()] + '.png'}">
                                <span data-bind="text: BerryType[$index()]"></span>
                                <span class="seedAmount" data-bind="text: App.game.farming.berryList[$index()]"></span>
                            </li>
                        </ul>

                        <div class="row">
                            <div class="col-lg-12 col-6">
                                <button class="btn btn-primary btn-block" data-bind="click: function(){App.game.farming.plantAll(FarmController.selectedBerry)}">
                                    Plant All
                                </button>
                            </div>
                            <div class="col-lg-12 col-6">
                                <button class="btn btn-success btn-block" data-bind="click: function(){App.game.farming.harvestAll()}">
                                    Harvest All
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-8" style="padding-left: 0">
                        <div id="plotList" data-bind="foreach: App.game.farming.plotList">
                            <div class="plot" data-bind="css :{plotLocked : !$data.isUnlocked}">
                                <div class="plot-content">
                                    <div class="plotImage">
                                        <img style="width: 100%" src="assets/images/farm/soil.png">
                                        <div data-bind="ifnot: $data.isEmpty()">
                                            <div class="plotButton"
                                                 data-bind="click: function(){App.game.farming.harvest($index())}, tooltip: {title: $data.formattedTimeLeft, trigger: 'hover', animation: false}">
                                                <img width="100%" height="100%"
                                                     style="max-width: 100%; max-height: 100%"
                                                     src=""
                                                     data-bind="attr:{ src: FarmController.getImage($index())}">
                                            </div>
                                        </div>
                                        <div data-bind="if: $data.isEmpty()">
                                            <div class="plotButton"
                                                 data-bind="click: function(){App.game.farming.plant($index(), FarmController.selectedBerry)}">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Ship Modal-->
<div class="modal noselect fade" id="ShipModal" tabindex="-1" role="dialog" aria-labelledby="ShipModalLabel">
    <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Regional Travel</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body bg-ocean">
                <img src='assets/images/ship.png' style='width: 100%;'>
                <div style='margin-top:20px'>
                    <button class='btn btn-block btn-success'
                        data-dismiss='modal'
                        data-bind='visible: player.region != 0'
                        onclick='MapHelper.moveToTown("Vermillion City");player.region = 0;'>
                        Kanto
                    </button>
                    <button class='btn btn-block btn-success'
                        data-dismiss='modal'
                        data-bind='visible: player.region != 1 && player.highestRegion() >= 1'
                        onclick='MapHelper.moveToTown("Olivine City");player.region = 1;'>
                        Johto
                    </button>
                    <button class='btn btn-block btn-success'
                        data-dismiss='modal'
                        data-bind='visible: player.region != 2 && player.highestRegion() >= 2'
                        onclick='MapHelper.moveToTown("Slateport City");player.region = 2;'>
                        Hoenn
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Safari Modal -->
<div aria-labelledby="safariModal" class="modal fade noselect" id="safariModal" role="dialog" style="cursor:default" tabindex="-1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="controls" data-bind="visible: Safari.inProgress() && !Safari.inBattle()">
                <div style="width:120px">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 411 411">
                        <g>
                          <path fill="whitesmoke" d="M382 137h-89c-11 0-19-8-19-19V29c0-16-13-29-29-29h-79c-16 0-29 13-29 29v89c0 11-8 19-19 19H29c-16 0-29 13-29 29v79c0 16 13 29 29 29h89c11 0 19 8 19 19v89c0 16 13 29 29 29h79c16 0 29-13 29-29v-89c0-11 8-19 19-19h89c16 0 29-13 29-29v-79c0-16-13-29-29-29zM93 244c0 2-2 3-4 2l-52-38c-2-1-2-4 0-5l52-38c2-1 4 0 4 3v76zm72-155l38-52c1-2 4-2 5 0l38 52c1 2 0 4-2 4h-76c-3 0-4-2-3-4zm81 233l-38 52c-1 2-4 2-5 0l-38-52c-1-2 0-4 3-4h76c2 0 3 2 2 4zm-40-69a47 47 0 110-94 47 47 0 010 94zm168-45l-52 38c-2 1-4 0-4-2v-76c0-3 2-4 4-3l52 38c2 1 2 4 0 5z"/>
                          <path fill="transparent" d="M135 1h142v137H135z"   onmousedown="GameController.simulateKey(38)" onmouseout="GameController.simulateKey(38, 'up')" onmouseup="GameController.simulateKey(38, 'up')" ontouchstart="GameController.simulateKey(38)"/><!-- up -->
                          <path fill="transparent" d="M1 137h142v137H1z"     onmousedown="GameController.simulateKey(37)" onmouseout="GameController.simulateKey(37, 'up')" onmouseup="GameController.simulateKey(37, 'up')" ontouchstart="GameController.simulateKey(37)"/><!-- left -->
                          <path fill="transparent" d="M135 273h142v137H135z" onmousedown="GameController.simulateKey(40)" onmouseout="GameController.simulateKey(40, 'up')" onmouseup="GameController.simulateKey(40, 'up')" ontouchstart="GameController.simulateKey(40)"/><!-- down -->
                          <path fill="transparent" d="M268 137h142v137H268z" onmousedown="GameController.simulateKey(39)" onmouseout="GameController.simulateKey(39, 'up')" onmouseup="GameController.simulateKey(39, 'up')" ontouchstart="GameController.simulateKey(39)"/><!-- right -->
                        </g>
                    </svg>
                </div>
            </div>
            <div class="modal-header">
                <h4 style='text-align:center' class="modal-title">
                    Safari Zone
                    <span data-bind="if: Safari.completed()">
                        <img class="pokeball-smallest"
                            data-bind='attr:{
                                title:"You have captured all of the Safari Pokémon" + (Safari.completed(true) ? " shiny" : "") + "!",
                                src:"assets/images/pokeball/Pokeball" + (Safari.completed(true) ? "-shiny" : "") + "-small.png"
                            }'
                        />
                    </span>
                </h4>
                <button class='btn btn-danger modalClose' onclick='Safari.closeModal()'>Leave</button>
            </div>

            <div class="modal-body p-0">
                <!-- Tab Titles -->
                <ul style="width:100%" class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a data-toggle='tab' class='nav-link active' href="#safariExplore">Explore</a>
                    </li>
                    <li class='nav-item'>
                        <a class='nav-link' href="#safariHelp" data-bind="attr: {'data-toggle': Safari.inBattle() ? '' : 'tab'}">Help</a>
                    </li>
                </ul>

                <!-- Tab Contents -->
                <div class=tab-content>

                    <!-- Main tab -->
                    <div  id="safariExplore" class="tab-pane fade in active show">
                        <div class="modal-body p-0">

                            <div id="safariEntrance" data-bind="if: !Safari.inProgress()">
                                <button id="paySafariButton" class="btn btn-block" onclick="Safari.payEntranceFee()"
                                    data-bind="class: Safari.canPay() ? 'btn-primary' : 'disabled btn-danger'">
                                    Pay Entrance Fee <knockout id='safariEntranceCost' data-bind="template: { name: 'currencyTemplate', data: {'amount': Safari.cost().amount, 'currency': Safari.cost().currency}}"></knockout>
                                </button>
                                <img class='fit-width' src="assets/images/safari/area1.png" />
                            </div>

                            <div id="safariBody"
                                class='container-fluid'
                                data-bind="visible: Safari.inProgress()">
                            </div>
                        </div>
                    </div>


                    <!-- Help tab -->
                    <div  id="safariHelp" class="tab-pane fade">
                        <div class="modal-body" style="width: 80%;margin: auto;">
                            <div id="safariHelpText">
                                <p>The safari zone contains several unique Pokémon, and a different method of encountering and capturing Pokémon.</p>
                                <p>After paying the entrance fee, you will be able to walk around in the safari zone. To encounter Pokémon, you must walk in tall grass.</p>
                                <p>
                                    When you have encountered a Pokémon, you will be given 4 options:
                                    <ul>
                                        <li>Ball: This will throw a pokeball and give you a chance of capturing the Pokémon</li>
                                        <li>Rock: Throwing a rock will make the Pokémon more likely to flee, but easier to catch</li>
                                        <li>Bait: Throwing bait will make the Pokémon less likely to flee, but harder to catch</li>
                                        <li>Run: This will end the encounter</li>
                                    </ul>
                                </p>
                                <p>After your turn of the encounter, if it did not result in the encounter ending, the wild Pokémon will have a chance of running away.</p>
                                <p>Your safari exploration will end when you have run out of pokeballs.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<!-- Safari Modal -->
<div class="modal fade noselect" id="safariBattleModal" tabindex="-1" role="dialog" aria-badgeledby="safariBattleModal">
    <div class="modal-dialog modal-dialog-centered modal-md" role="document">
       <div class="modal-content">
           <div class="modal-body p-0">
              <div class="battle-view">
                <div class="row justify-content-center no-gutters" data-bind="if: Safari.inBattle">
                  <div class="col no-gutters clickable" data-bind="click: function() {BattleFrontierBattle.clickAttack()}" style="height: 220px; display: block;">
                      <h2 class="pageItemTitle" style="display: block;">

                          <knockout class="left">
                          </knockout>

                          <knockout>
                              <knockout data-bind="text: SafariBattle.enemy.name">Pokemon name</knockout>
                              <knockout data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(SafariBattle.enemy.id)}}"></knockout>
                          </knockout>

                          <knockout class="right">
                          </knockout>
                      </h2>

                      <div>
                          <img class="enemy" data-bind="attr: { src: `assets/images/${SafariBattle.enemy.shiny ? 'shiny' : ''}pokemon/${SafariBattle.enemy.id}.png` }" src=""/>
                      </div>

                      <h2 class="pageItemFooter" style="display: block;">

                          <knockout class="left" data-bind="text: `Catch chance: ${SafariBattle.enemy.catchFactor.toFixed(2)} %`">
                          </knockout>
                            &nbsp;
                          <knockout class="right" data-bind="text: `Escape chance: ${SafariBattle.enemy.escapeFactor.toFixed(2)} %`">
                          </knockout>
                      </h2>
                  </div>
                </div>
              </div>
           </div>

           <div class="modal-footer p-0 bg-dark text-light">
                <div class="message" data-bind='html: SafariBattle.text'></div>
                <div class="row" style="width: 100%;">
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.throwBall()" data-bind='text: "Ball (" + Safari.balls() + ")"'>Ball (30)</button>
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.throwBait()">Bait</button>
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.throwRock()">Rock</button>
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.run()">Run</button>
                </div>
           </div>
       </div>
    </div>
</div>

</body>
</html>
